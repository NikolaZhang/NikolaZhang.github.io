import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,c,a as s,b as n,d as a,e as t,r}from"./app.e7c9cb9e.js";const i={},l={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html",target:"_blank",rel:"noopener noreferrer"},d=s("blockquote",null,[s("p",null,"Spider\u7C7B\u5B9A\u4E49\u4E86\u5982\u4F55\u722C\u53D6\u67D0\u4E2A(\u6216\u67D0\u4E9B)\u7F51\u7AD9\u3002\u5305\u62EC\u4E86\u722C\u53D6\u7684\u52A8\u4F5C(\u4F8B\u5982:\u662F\u5426\u8DDF\u8FDB\u94FE\u63A5)\u4EE5\u53CA\u5982\u4F55\u4ECE\u7F51\u9875\u7684\u5185\u5BB9\u4E2D\u63D0\u53D6\u7ED3\u6784\u5316\u6570\u636E(\u722C\u53D6item)\u3002 \u6362\u53E5\u8BDD\u8BF4\uFF0CSpider\u5C31\u662F\u60A8\u5B9A\u4E49\u722C\u53D6\u7684\u52A8\u4F5C\u53CA\u5206\u6790\u67D0\u4E2A\u7F51\u9875(\u6216\u8005\u662F\u6709\u4E9B\u7F51\u9875)\u7684\u5730\u65B9\u3002")],-1),u=s("p",null,"\u5BF9spider\u6765\u8BF4\uFF0C\u722C\u53D6\u7684\u5FAA\u73AF\u7C7B\u4F3C\u4E0B\u6587:",-1),h=t("<li><p>\u4EE5\u521D\u59CB\u7684URL\u521D\u59CB\u5316Request\uFF0C\u5E76\u8BBE\u7F6E\u56DE\u8C03\u51FD\u6570\u3002 \u5F53\u8BE5request\u4E0B\u8F7D\u5B8C\u6BD5\u5E76\u8FD4\u56DE\u65F6\uFF0C\u5C06\u751F\u6210response\uFF0C\u5E76\u4F5C\u4E3A\u53C2\u6570\u4F20\u7ED9\u8BE5\u56DE\u8C03\u51FD\u6570\u3002</p><p>spider\u4E2D\u521D\u59CB\u7684request\u662F\u901A\u8FC7\u8C03\u7528 <code>[start_requests()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.start_requests)</code> \u6765\u83B7\u53D6\u7684\u3002 <code>[start_requests()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.start_requests)</code> \u8BFB\u53D6 <code>[start_urls](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.start_urls)</code> \u4E2D\u7684URL\uFF0C \u5E76\u4EE5 <code>[parse](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.parse)</code> \u4E3A\u56DE\u8C03\u51FD\u6570\u751F\u6210 <code>[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)</code> \u3002</p></li><li><p>\u5728\u56DE\u8C03\u51FD\u6570\u5185\u5206\u6790\u8FD4\u56DE\u7684(\u7F51\u9875)\u5185\u5BB9\uFF0C\u8FD4\u56DE <code>[Item](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/items.html#scrapy.item.Item)</code> \u5BF9\u8C61\u6216\u8005 <code>[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)</code> \u6216\u8005\u4E00\u4E2A\u5305\u62EC\u4E8C\u8005\u7684\u53EF\u8FED\u4EE3\u5BB9\u5668\u3002 \u8FD4\u56DE\u7684Request\u5BF9\u8C61\u4E4B\u540E\u4F1A\u7ECF\u8FC7Scrapy\u5904\u7406\uFF0C\u4E0B\u8F7D\u76F8\u5E94\u7684\u5185\u5BB9\uFF0C\u5E76\u8C03\u7528\u8BBE\u7F6E\u7684callback\u51FD\u6570(\u51FD\u6570\u53EF\u76F8\u540C)\u3002</p></li>",2),k={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/selectors.html#topics-selectors",target:"_blank",rel:"noopener noreferrer"},m={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/item-pipeline.html#topics-item-pipeline",target:"_blank",rel:"noopener noreferrer"},_={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/feed-exports.html#topics-feed-exports",target:"_blank",rel:"noopener noreferrer"},v=s("p",null,"\u867D\u7136\u8BE5\u5FAA\u73AF\u5BF9\u4EFB\u4F55\u7C7B\u578B\u7684spider\u90FD(\u591A\u5C11)\u9002\u7528\uFF0C\u4F46Scrapy\u4ECD\u7136\u4E3A\u4E86\u4E0D\u540C\u7684\u9700\u6C42\u63D0\u4F9B\u4E86\u591A\u79CD\u9ED8\u8BA4spider\u3002 \u4E4B\u540E\u5C06\u8BA8\u8BBA\u8FD9\u4E9Bspider\u3002",-1),b={id:"spider\u53C2\u6570\xB6",tabindex:"-1"},y=s("a",{class:"header-anchor",href:"#spider\u53C2\u6570\xB6","aria-hidden":"true"},"#",-1),g={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#spider",target:"_blank",rel:"noopener noreferrer"},f=t(`<p>Spider\u53EF\u4EE5\u901A\u8FC7\u63A5\u53D7\u53C2\u6570\u6765\u4FEE\u6539\u5176\u529F\u80FD\u3002 spider\u53C2\u6570\u4E00\u822C\u7528\u6765\u5B9A\u4E49\u521D\u59CBURL\u6216\u8005\u6307\u5B9A\u9650\u5236\u722C\u53D6\u7F51\u7AD9\u7684\u90E8\u5206\u3002 \u60A8\u4E5F\u53EF\u4EE5\u4F7F\u7528\u5176\u6765\u914D\u7F6Espider\u7684\u4EFB\u4F55\u529F\u80FD\u3002</p><p>\u5728\u8FD0\u884C <code>[crawl](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/commands.html#std:command-crawl)</code> \u65F6\u6DFB\u52A0 <code>-a</code> \u53EF\u4EE5\u4F20\u9012Spider\u53C2\u6570:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>scrapy crawl myspider <span class="token parameter variable">-a</span> <span class="token assign-left variable">category</span><span class="token operator">=</span>electronics
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Spider\u5728\u6784\u9020\u5668(constructor)\u4E2D\u83B7\u53D6\u53C2\u6570:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
name <span class="token operator">=</span> <span class="token string">&#39;myspider&#39;</span>

<span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> category<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">super</span><span class="token punctuation">(</span>MySpider<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;&lt;http://www.example.com/categories/%s&gt;&#39;</span> <span class="token operator">%</span> category<span class="token punctuation">]</span>
    <span class="token comment"># ...</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),w=s("code",null,"schedule.json",-1),S={href:"http://scrapyd.readthedocs.org/",target:"_blank",rel:"noopener noreferrer"},C={id:"\u5185\u7F6Espider\u53C2\u8003\u624B\u518C\xB6",tabindex:"-1"},x=s("a",{class:"header-anchor",href:"#\u5185\u7F6Espider\u53C2\u8003\u624B\u518C\xB6","aria-hidden":"true"},"#",-1),N={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#topics-spiders-ref",target:"_blank",rel:"noopener noreferrer"},q={href:"http://www.sitemaps.org/",target:"_blank",rel:"noopener noreferrer"},z=t(`<p>\u4E0B\u9762spider\u7684\u793A\u4F8B\u4E2D\uFF0C\u6211\u4EEC\u5047\u5B9A\u60A8\u6709\u4E2A\u9879\u76EE\u5728 <code>myproject.items</code> \u6A21\u5757\u4E2D\u58F0\u660E\u4E86 <code>TestItem</code>:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">TestItem</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">)</span><span class="token punctuation">:</span>
		<span class="token builtin">id</span> <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
		name <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
		description <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Field<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),R={id:"_1-spider\xB6",tabindex:"-1"},M=s("a",{class:"header-anchor",href:"#_1-spider\xB6","aria-hidden":"true"},"#",-1),L={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#id2",target:"_blank",rel:"noopener noreferrer"},F=s("em",null,"class",-1),I=s("code",null,"scrapy.spider.Spider",-1),X={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider",target:"_blank",rel:"noopener noreferrer"},V=s("p",null,[n("Spider\u662F\u6700\u7B80\u5355\u7684spider\u3002\u6BCF\u4E2A\u5176\u4ED6\u7684spider\u5FC5\u987B\u7EE7\u627F\u81EA\u8BE5\u7C7B(\u5305\u62ECScrapy\u81EA\u5E26\u7684\u5176\u4ED6spider\u4EE5\u53CA\u60A8\u81EA\u5DF1\u7F16\u5199\u7684spider)\u3002 Spider\u5E76\u6CA1\u6709\u63D0\u4F9B\u4EC0\u4E48\u7279\u6B8A\u7684\u529F\u80FD\u3002 \u5176\u4EC5\u4EC5\u8BF7\u6C42\u7ED9\u5B9A\u7684 "),s("code",null,"start_urls"),n("/"),s("code",null,"start_requests"),n(" \uFF0C\u5E76\u6839\u636E\u8FD4\u56DE\u7684\u7ED3\u679C(resulting responses)\u8C03\u7528spider\u7684 "),s("code",null,"parse"),n(" \u65B9\u6CD5\u3002")],-1),T=s("code",null,"name",-1),U={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.name",target:"_blank",rel:"noopener noreferrer"},j=s("p",null,"\u5B9A\u4E49spider\u540D\u5B57\u7684\u5B57\u7B26\u4E32(string)\u3002spider\u7684\u540D\u5B57\u5B9A\u4E49\u4E86Scrapy\u5982\u4F55\u5B9A\u4F4D(\u5E76\u521D\u59CB\u5316)spider\uFF0C\u6240\u4EE5\u5176\u5FC5\u987B\u662F\u552F\u4E00\u7684\u3002 \u4E0D\u8FC7\u60A8\u53EF\u4EE5\u751F\u6210\u591A\u4E2A\u76F8\u540C\u7684spider\u5B9E\u4F8B(instance)\uFF0C\u8FD9\u6CA1\u6709\u4EFB\u4F55\u9650\u5236\u3002 name\u662Fspider\u6700\u91CD\u8981\u7684\u5C5E\u6027\uFF0C\u800C\u4E14\u662F\u5FC5\u987B\u7684\u3002",-1),D={href:"http://en.wikipedia.org/wiki/Top-level_domain",target:"_blank",rel:"noopener noreferrer"},O=s("code",null,"mywebsite.com",-1),E=s("code",null,"mywebsite",-1),A=s("code",null,"allowed_domains",-1),P={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.allowed_domains",target:"_blank",rel:"noopener noreferrer"},B=s("p",null,[n("\u53EF\u9009\u3002\u5305\u542B\u4E86spider\u5141\u8BB8\u722C\u53D6\u7684\u57DF\u540D(domain)\u5217\u8868(list)\u3002 \u5F53 "),s("code",null,"[OffsiteMiddleware](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spider-middleware.html#scrapy.contrib.spidermiddleware.offsite.OffsiteMiddleware)"),n(" \u542F\u7528\u65F6\uFF0C \u57DF\u540D\u4E0D\u5728\u5217\u8868\u4E2D\u7684URL\u4E0D\u4F1A\u88AB\u8DDF\u8FDB\u3002")],-1),H=s("code",null,"start_urls",-1),Y={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.start_urls",target:"_blank",rel:"noopener noreferrer"},G=s("p",null,"URL\u5217\u8868\u3002\u5F53\u6CA1\u6709\u5236\u5B9A\u7279\u5B9A\u7684URL\u65F6\uFF0Cspider\u5C06\u4ECE\u8BE5\u5217\u8868\u4E2D\u5F00\u59CB\u8FDB\u884C\u722C\u53D6\u3002 \u56E0\u6B64\uFF0C\u7B2C\u4E00\u4E2A\u88AB\u83B7\u53D6\u5230\u7684\u9875\u9762\u7684URL\u5C06\u662F\u8BE5\u5217\u8868\u4E4B\u4E00\u3002 \u540E\u7EED\u7684URL\u5C06\u4F1A\u4ECE\u83B7\u53D6\u5230\u7684\u6570\u636E\u4E2D\u63D0\u53D6\u3002",-1),J=s("code",null,"custom_settings",-1),K={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.custom_settings",target:"_blank",rel:"noopener noreferrer"},Q=s("p",null,"A dictionary of settings that will be overridden from the project wide configuration when running this spider. It must be defined as a class attribute since the settings are updated before instantiation.",-1),W={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#topics-settings-ref",target:"_blank",rel:"noopener noreferrer"},Z=s("code",null,"crawler",-1),$={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.crawler",target:"_blank",rel:"noopener noreferrer"},ss=s("p",null,[n("This attribute is set by the "),s("code",null,"[from_crawler()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/item-pipeline.html#from_crawler)"),n(" class method after initializating the class, and links to the "),s("code",null,"[Crawler](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/api.html#scrapy.crawler.Crawler)"),n(" object to which this spider instance is bound.")],-1),ns={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/api.html#topics-api-crawler",target:"_blank",rel:"noopener noreferrer"},es=s("code",null,"settings",-1),as={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.settings",target:"_blank",rel:"noopener noreferrer"},ts=s("code",null,"[Settings](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/api.html#scrapy.settings.Settings)",-1),ps={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#topics-settings",target:"_blank",rel:"noopener noreferrer"},os=s("code",null,"from_crawler",-1),cs=s("em",null,"crawler",-1),rs=s("em",null,"args",-1),is=s("em",null,"kwargs",-1),ls={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.from_crawler",target:"_blank",rel:"noopener noreferrer"},ds=s("p",null,"This is the class method used by Scrapy to create your spiders.",-1),us=s("p",null,[n("You probably won\u2019t need to override this directly, since the default implementation acts as a proxy to the "),s("code",null,"__init__()"),n(" method, calling it with the given arguments args and named arguments kwargs.")],-1),hs=s("p",null,[n("Nonetheless, this method sets the "),s("code",null,"[crawler](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.crawler)"),n(" and "),s("code",null,"[settings](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.settings)"),n(" attributes in the new instance, so they can be accessed later inside the spider\u2019s code.")],-1),ks=s("p",null,"\u53C2\u6570:",-1),ms=s("li",null,[s("strong",null,"crawler"),n(" ("),s("code",null,"[Crawler](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/api.html#scrapy.crawler.Crawler)"),n(" instance) \u2013 crawler to which the spider will be bound")],-1),_s=s("strong",null,"args",-1),vs={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/api.html#scrapy.spidermanager.SpiderManager.list",target:"_blank",rel:"noopener noreferrer"},bs=s("code",null,"__init__()",-1),ys=s("li",null,[s("strong",null,"kwargs"),n(" ("),s("em",null,"dict"),n(") \u2013 keyword arguments passed to the "),s("code",null,"__init__()"),n(" method")],-1),gs=s("code",null,"start_requests",-1),fs={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.start_requests",target:"_blank",rel:"noopener noreferrer"},ws=t(`<p>\u8BE5\u65B9\u6CD5\u5FC5\u987B\u8FD4\u56DE\u4E00\u4E2A\u53EF\u8FED\u4EE3\u5BF9\u8C61(iterable)\u3002\u8BE5\u5BF9\u8C61\u5305\u542B\u4E86spider\u7528\u4E8E\u722C\u53D6\u7684\u7B2C\u4E00\u4E2ARequest\u3002</p><p>\u5F53spider\u542F\u52A8\u722C\u53D6\u5E76\u4E14\u672A\u5236\u5B9AURL\u65F6\uFF0C\u8BE5\u65B9\u6CD5\u88AB\u8C03\u7528\u3002 \u5F53\u6307\u5B9A\u4E86URL\u65F6\uFF0C<code>[make_requests_from_url()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.make_requests_from_url)</code> \u5C06\u88AB\u8C03\u7528\u6765\u521B\u5EFARequest\u5BF9\u8C61\u3002 \u8BE5\u65B9\u6CD5\u4EC5\u4EC5\u4F1A\u88ABScrapy\u8C03\u7528\u4E00\u6B21\uFF0C\u56E0\u6B64\u60A8\u53EF\u4EE5\u5C06\u5176\u5B9E\u73B0\u4E3A\u751F\u6210\u5668\u3002</p><p>\u8BE5\u65B9\u6CD5\u7684\u9ED8\u8BA4\u5B9E\u73B0\u662F\u4F7F\u7528 <code>[start_urls](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.start_urls)</code> \u7684url\u751F\u6210Request\u3002</p><p>\u5982\u679C\u60A8\u60F3\u8981\u4FEE\u6539<code>\u6700\u521D\u722C\u53D6\u67D0\u4E2A\u7F51\u7AD9\u7684Request\u5BF9\u8C61</code>\uFF0C\u60A8\u53EF\u4EE5\u91CD\u5199(override)\u8BE5\u65B9\u6CD5\u3002 \u4F8B\u5982\uFF0C\u5982\u679C\u60A8\u9700\u8981\u5728\u542F\u52A8\u65F6\u4EE5POST\u767B\u5F55\u67D0\u4E2A\u7F51\u7AD9\uFF0C\u4F60\u53EF\u4EE5\u8FD9\u4E48\u5199:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>scrapy<span class="token punctuation">.</span>FormRequest<span class="token punctuation">(</span><span class="token string">&quot;http://www.example.com/login&quot;</span><span class="token punctuation">,</span>
                               formdata<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&#39;user&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;john&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;pass&#39;</span><span class="token punctuation">:</span> <span class="token string">&#39;secret&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
                               callback<span class="token operator">=</span>self<span class="token punctuation">.</span>logged_in<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">def</span> <span class="token function">logged_in</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># here you would extract links to follow and return Requests for</span>
    <span class="token comment"># each of them, with another callback</span>
    <span class="token keyword">pass</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),Ss=s("code",null,"make_requests_from_url",-1),Cs=s("em",null,"url",-1),xs={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.make_requests_from_url",target:"_blank",rel:"noopener noreferrer"},Ns=s("p",null,[n("\u8BE5\u65B9\u6CD5\u63A5\u53D7\u4E00\u4E2AURL\u5E76\u8FD4\u56DE\u7528\u4E8E\u722C\u53D6\u7684 "),s("code",null,"[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)"),n(" \u5BF9\u8C61\u3002 \u8BE5\u65B9\u6CD5\u5728\u521D\u59CB\u5316request\u65F6\u88AB "),s("code",null,"[start_requests()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.start_requests)"),n(" \u8C03\u7528\uFF0C\u4E5F\u88AB\u7528\u4E8E\u8F6C\u5316url\u4E3Arequest\u3002")],-1),qs=s("p",null,[n("\u9ED8\u8BA4\u672A\u88AB\u590D\u5199(overridden)\u7684\u60C5\u51B5\u4E0B\uFF0C\u8BE5\u65B9\u6CD5\u8FD4\u56DE\u7684Request\u5BF9\u8C61\u4E2D\uFF0C "),s("code",null,"[parse()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.parse)"),n(" \u4F5C\u4E3A\u56DE\u8C03\u51FD\u6570\uFF0Cdont_filter\u53C2\u6570\u4E5F\u88AB\u8BBE\u7F6E\u4E3A\u5F00\u542F\u3002 (\u8BE6\u60C5\u53C2\u89C1 "),s("code",null,"[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)"),n(").")],-1),zs=s("code",null,"parse",-1),Rs=s("em",null,"response",-1),Ms={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.parse",target:"_blank",rel:"noopener noreferrer"},Ls=t("<p>\u5F53response\u6CA1\u6709\u6307\u5B9A\u56DE\u8C03\u51FD\u6570\u65F6\uFF0C\u8BE5\u65B9\u6CD5\u662FScrapy\u5904\u7406\u4E0B\u8F7D\u7684response\u7684\u9ED8\u8BA4\u65B9\u6CD5\u3002</p><p><code>parse</code> \u8D1F\u8D23\u5904\u7406response\u5E76\u8FD4\u56DE\u5904\u7406\u7684\u6570\u636E\u4EE5\u53CA(/\u6216)\u8DDF\u8FDB\u7684URL\u3002 <code>[Spider](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider)</code> \u5BF9\u5176\u4ED6\u7684Request\u7684\u56DE\u8C03\u51FD\u6570\u4E5F\u6709\u76F8\u540C\u7684\u8981\u6C42\u3002</p><p>\u8BE5\u65B9\u6CD5\u53CA\u5176\u4ED6\u7684Request\u56DE\u8C03\u51FD\u6570\u5FC5\u987B\u8FD4\u56DE\u4E00\u4E2A\u5305\u542B <code>[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)</code> \u53CA(\u6216) <code>[Item](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/items.html#scrapy.item.Item)</code> \u7684\u53EF\u8FED\u4EE3\u7684\u5BF9\u8C61\u3002</p><p>\u53C2\u6570:</p><p><strong>response</strong> (<code>[Response](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Response)</code>) \u2013 \u7528\u4E8E\u5206\u6790\u7684response</p>",5),Fs=s("code",null,"log",-1),Is=s("em",null,"message",-1),Xs=s("em",null,"level",-1),Vs=s("em",null,"component",-1),Ts={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.log",target:"_blank",rel:"noopener noreferrer"},Us=s("code",null,"[scrapy.log.msg()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.msg)",-1),js=s("code",null,"[name](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.name)",-1),Ds={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#topics-logging",target:"_blank",rel:"noopener noreferrer"},Os=s("code",null,"closed",-1),Es=s("em",null,"reason",-1),As={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.closed",target:"_blank",rel:"noopener noreferrer"},Ps=s("p",null,[n("\u5F53spider\u5173\u95ED\u65F6\uFF0C\u8BE5\u51FD\u6570\u88AB\u8C03\u7528\u3002 \u8BE5\u65B9\u6CD5\u63D0\u4F9B\u4E86\u4E00\u4E2A\u66FF\u4EE3\u8C03\u7528signals.connect()\u6765\u76D1\u542C "),s("code",null,"[spider_closed](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/signals.html#std:signal-spider_closed)"),n(" \u4FE1\u53F7\u7684\u5FEB\u6377\u65B9\u5F0F\u3002")],-1),Bs={id:"spider\u6837\u4F8B\xB6",tabindex:"-1"},Hs=s("a",{class:"header-anchor",href:"#spider\u6837\u4F8B\xB6","aria-hidden":"true"},"#",-1),Ys={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#id3",target:"_blank",rel:"noopener noreferrer"},Gs=t(`<p>\u8BA9\u6211\u4EEC\u6765\u770B\u4E00\u4E2A\u4F8B\u5B50:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> scrapy

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">&#39;example.com&#39;</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;example.com&#39;</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;http://www.example.com/1.html&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;http://www.example.com/2.html&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;http://www.example.com/3.html&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&#39;A response from %s just arrived!&#39;</span> <span class="token operator">%</span> response<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53E6\u4E00\u4E2A\u5728\u5355\u4E2A\u56DE\u8C03\u51FD\u6570\u4E2D\u8FD4\u56DE\u591A\u4E2ARequest\u4EE5\u53CAItem\u7684\u4F8B\u5B50:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> scrapy
<span class="token keyword">from</span> myproject<span class="token punctuation">.</span>items <span class="token keyword">import</span> MyItem

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>scrapy<span class="token punctuation">.</span>Spider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">&#39;example.com&#39;</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;example.com&#39;</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;http://www.example.com/1.html&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;http://www.example.com/2.html&#39;</span><span class="token punctuation">,</span>
        <span class="token string">&#39;http://www.example.com/3.html&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        sel <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Selector<span class="token punctuation">(</span>response<span class="token punctuation">)</span>
        <span class="token keyword">for</span> h3 <span class="token keyword">in</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//h3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">yield</span> MyItem<span class="token punctuation">(</span>title<span class="token operator">=</span>h3<span class="token punctuation">)</span>

        <span class="token keyword">for</span> url <span class="token keyword">in</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//a/@href&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">yield</span> scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>url<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>parse<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),Js={id:"_2-crawlspider\xB6",tabindex:"-1"},Ks=s("a",{class:"header-anchor",href:"#_2-crawlspider\xB6","aria-hidden":"true"},"#",-1),Qs={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#crawlspider",target:"_blank",rel:"noopener noreferrer"},Ws=s("em",null,"class",-1),Zs=s("code",null,"scrapy.contrib.spiders.CrawlSpider",-1),$s={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CrawlSpider",target:"_blank",rel:"noopener noreferrer"},sn=s("p",null,[n("\u722C\u53D6\u4E00\u822C\u7F51\u7AD9\u5E38\u7528\u7684spider\u3002\u5176"),s("code",null,"\u5B9A\u4E49\u4E86\u4E00\u4E9B\u89C4\u5219(rule)\u6765\u63D0\u4F9B\u8DDF\u8FDBlink"),n("\u7684\u65B9\u4FBF\u7684\u673A\u5236\u3002 \u4E5F\u8BB8\u8BE5spider\u5E76\u4E0D\u662F\u5B8C\u5168\u9002\u5408\u60A8\u7684\u7279\u5B9A\u7F51\u7AD9\u6216\u9879\u76EE\uFF0C\u4F46\u5176\u5BF9\u5F88\u591A\u60C5\u51B5\u90FD\u4F7F\u7528\u3002 \u56E0\u6B64\u60A8\u53EF\u4EE5\u4EE5\u5176\u4E3A\u8D77\u70B9\uFF0C\u6839\u636E\u9700\u6C42\u4FEE\u6539\u90E8\u5206\u65B9\u6CD5\u3002\u5F53\u7136\u60A8\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u81EA\u5DF1\u7684spider\u3002")],-1),nn=s("p",null,"\u9664\u4E86\u4ECESpider\u7EE7\u627F\u8FC7\u6765\u7684(\u60A8\u5FC5\u987B\u63D0\u4F9B\u7684)\u5C5E\u6027\u5916\uFF0C\u5176\u63D0\u4F9B\u4E86\u4E00\u4E2A\u65B0\u7684\u5C5E\u6027:",-1),en=s("code",null,"rules",-1),an={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CrawlSpider.rules",target:"_blank",rel:"noopener noreferrer"},tn=s("p",null,[n("\u4E00\u4E2A\u5305\u542B\u4E00\u4E2A(\u6216\u591A\u4E2A) "),s("code",null,"[Rule](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.Rule)"),n(" \u5BF9\u8C61\u7684\u96C6\u5408(list)\u3002 \u6BCF\u4E2A "),s("code",null,"[Rule](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.Rule)"),n(" \u5BF9\u722C\u53D6\u7F51\u7AD9\u7684\u52A8\u4F5C\u5B9A\u4E49\u4E86\u7279\u5B9A\u8868\u73B0\u3002 Rule\u5BF9\u8C61\u5728\u4E0B\u8FB9\u4F1A\u4ECB\u7ECD\u3002 \u5982\u679C\u591A\u4E2Arule\u5339\u914D\u4E86\u76F8\u540C\u7684\u94FE\u63A5\uFF0C\u5219\u6839\u636E\u4ED6\u4EEC\u5728\u672C\u5C5E\u6027\u4E2D\u88AB\u5B9A\u4E49\u7684\u987A\u5E8F\uFF0C\u7B2C\u4E00\u4E2A\u4F1A\u88AB\u4F7F\u7528\u3002")],-1),pn=s("p",null,"\u8BE5spider\u4E5F\u63D0\u4F9B\u4E86\u4E00\u4E2A\u53EF\u590D\u5199(overrideable)\u7684\u65B9\u6CD5:",-1),on=s("code",null,"parse_start_url",-1),cn=s("em",null,"response",-1),rn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CrawlSpider.parse_start_url",target:"_blank",rel:"noopener noreferrer"},ln=s("p",null,[n("\u5F53start_url\u7684\u8BF7\u6C42\u8FD4\u56DE\u65F6\uFF0C\u8BE5\u65B9\u6CD5\u88AB\u8C03\u7528\u3002 \u8BE5\u65B9\u6CD5\u5206\u6790\u6700\u521D\u7684\u8FD4\u56DE\u503C\u5E76\u5FC5\u987B\u8FD4\u56DE\u4E00\u4E2A "),s("code",null,"[Item](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/items.html#scrapy.item.Item)"),n(" \u5BF9\u8C61\u6216\u8005 \u4E00\u4E2A "),s("code",null,"[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)"),n(" \u5BF9\u8C61\u6216\u8005 \u4E00\u4E2A\u53EF\u8FED\u4EE3\u7684\u5305\u542B\u4E8C\u8005\u5BF9\u8C61\u3002")],-1),dn={id:"\u722C\u53D6\u89C4\u5219-crawling-rules-\xB6",tabindex:"-1"},un=s("a",{class:"header-anchor",href:"#\u722C\u53D6\u89C4\u5219-crawling-rules-\xB6","aria-hidden":"true"},"#",-1),hn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#crawling-rules",target:"_blank",rel:"noopener noreferrer"},kn=s("em",null,"class",-1),mn=s("code",null,"scrapy.contrib.spiders.Rule",-1),_n=s("em",null,"extractor",-1),vn=s("em",null,"callback=None",-1),bn=s("em",null,"kwargs=None",-1),yn=s("em",null,"follow=None",-1),gn=s("em",null,"links=None",-1),fn=s("em",null,"request=None",-1),wn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.Rule",target:"_blank",rel:"noopener noreferrer"},Sn=s("code",null,"link_extractor",-1),Cn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/link-extractors.html#topics-link-extractors",target:"_blank",rel:"noopener noreferrer"},xn=t("<p><code>callback</code> \u662F\u4E00\u4E2Acallable\u6216string(\u8BE5spider\u4E2D\u540C\u540D\u7684\u51FD\u6570\u5C06\u4F1A\u88AB\u8C03\u7528)\u3002 \u4ECElink_extractor\u4E2D\u6BCF\u83B7\u53D6\u5230\u94FE\u63A5\u65F6\u5C06\u4F1A\u8C03\u7528\u8BE5\u51FD\u6570\u3002\u8BE5\u56DE\u8C03\u51FD\u6570\u63A5\u53D7\u4E00\u4E2Aresponse\u4F5C\u4E3A\u5176\u7B2C\u4E00\u4E2A\u53C2\u6570\uFF0C \u5E76\u8FD4\u56DE\u4E00\u4E2A\u5305\u542B <code>[Item](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/items.html#scrapy.item.Item)</code> \u4EE5\u53CA(\u6216) <code>[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)</code> \u5BF9\u8C61(\u6216\u8005\u8FD9\u4E24\u8005\u7684\u5B50\u7C7B)\u7684\u5217\u8868(list)\u3002</p><p>\u8B66\u544A</p><p>\u5F53\u7F16\u5199\u722C\u866B\u89C4\u5219\u65F6\uFF0C\u8BF7\u907F\u514D\u4F7F\u7528 <code>parse</code> \u4F5C\u4E3A\u56DE\u8C03\u51FD\u6570\u3002 \u7531\u4E8E <code>[CrawlSpider](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CrawlSpider)</code> \u4F7F\u7528 <code>parse</code> \u65B9\u6CD5\u6765\u5B9E\u73B0\u5176\u903B\u8F91\uFF0C\u5982\u679C \u60A8\u8986\u76D6\u4E86 <code>parse</code> \u65B9\u6CD5\uFF0Ccrawl spider \u5C06\u4F1A\u8FD0\u884C\u5931\u8D25\u3002</p><p><code>cb_kwargs</code> \u5305\u542B\u4F20\u9012\u7ED9\u56DE\u8C03\u51FD\u6570\u7684\u53C2\u6570(keyword argument)\u7684\u5B57\u5178\u3002</p><p><code>follow</code> \u662F\u4E00\u4E2A\u5E03\u5C14(boolean)\u503C\uFF0C\u6307\u5B9A\u4E86\u6839\u636E\u8BE5\u89C4\u5219\u4ECEresponse\u63D0\u53D6\u7684\u94FE\u63A5\u662F\u5426\u9700\u8981\u8DDF\u8FDB\u3002 \u5982\u679C <code>callback</code> \u4E3ANone\uFF0C <code>follow</code> \u9ED8\u8BA4\u8BBE\u7F6E\u4E3A <code>True</code> \uFF0C\u5426\u5219\u9ED8\u8BA4\u4E3A <code>False</code> \u3002</p><p><code>process_links</code> \u662F\u4E00\u4E2Acallable\u6216string(\u8BE5spider\u4E2D\u540C\u540D\u7684\u51FD\u6570\u5C06\u4F1A\u88AB\u8C03\u7528)\u3002 \u4ECElink_extractor\u4E2D\u83B7\u53D6\u5230\u94FE\u63A5\u5217\u8868\u65F6\u5C06\u4F1A\u8C03\u7528\u8BE5\u51FD\u6570\u3002\u8BE5\u65B9\u6CD5\u4E3B\u8981\u7528\u6765\u8FC7\u6EE4\u3002</p><p><code>process_request</code> \u662F\u4E00\u4E2Acallable\u6216string(\u8BE5spider\u4E2D\u540C\u540D\u7684\u51FD\u6570\u5C06\u4F1A\u88AB\u8C03\u7528)\u3002 \u8BE5\u89C4\u5219\u63D0\u53D6\u5230\u6BCF\u4E2Arequest\u65F6\u90FD\u4F1A\u8C03\u7528\u8BE5\u51FD\u6570\u3002\u8BE5\u51FD\u6570\u5FC5\u987B\u8FD4\u56DE\u4E00\u4E2Arequest\u6216\u8005None\u3002 (\u7528\u6765\u8FC7\u6EE4request)</p>",7),Nn={id:"crawlspider\u6837\u4F8B\xB6",tabindex:"-1"},qn=s("a",{class:"header-anchor",href:"#crawlspider\u6837\u4F8B\xB6","aria-hidden":"true"},"#",-1),zn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#id4",target:"_blank",rel:"noopener noreferrer"},Rn=t(`<p>\u63A5\u4E0B\u6765\u7ED9\u51FA\u914D\u5408rule\u4F7F\u7528CrawlSpider\u7684\u4F8B\u5B50:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> scrapy
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> CrawlSpider<span class="token punctuation">,</span> Rule
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>linkextractors <span class="token keyword">import</span> LinkExtractor

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>CrawlSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">&#39;example.com&#39;</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;example.com&#39;</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com&#39;</span><span class="token punctuation">]</span>

    rules <span class="token operator">=</span> <span class="token punctuation">(</span>
        <span class="token comment"># \u63D0\u53D6\u5339\u914D &#39;category.php&#39; (\u4F46\u4E0D\u5339\u914D &#39;subsection.php&#39;) \u7684\u94FE\u63A5\u5E76\u8DDF\u8FDB\u94FE\u63A5(\u6CA1\u6709callback\u610F\u5473\u7740follow\u9ED8\u8BA4\u4E3ATrue)</span>
        Rule<span class="token punctuation">(</span>LinkExtractor<span class="token punctuation">(</span>allow<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&#39;category\\.php&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> deny<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&#39;subsection\\.php&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

        <span class="token comment"># \u63D0\u53D6\u5339\u914D &#39;item.php&#39; \u7684\u94FE\u63A5\u5E76\u4F7F\u7528spider\u7684parse_item\u65B9\u6CD5\u8FDB\u884C\u5206\u6790</span>
        Rule<span class="token punctuation">(</span>LinkExtractor<span class="token punctuation">(</span>allow<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&#39;item\\.php&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> callback<span class="token operator">=</span><span class="token string">&#39;parse_item&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">parse_item</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&#39;Hi, this is an item page! %s&#39;</span> <span class="token operator">%</span> response<span class="token punctuation">.</span>url<span class="token punctuation">)</span>

        item <span class="token operator">=</span> scrapy<span class="token punctuation">.</span>Item<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//td[@id=&quot;item_id&quot;]/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>re<span class="token punctuation">(</span><span class="token string">r&#39;ID: (\\d+)&#39;</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//td[@id=&quot;item_name&quot;]/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;//td[@id=&quot;item_description&quot;]/text()&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> item
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BE5spider\u5C06\u4ECEexample.com\u7684\u9996\u9875\u5F00\u59CB\u722C\u53D6\uFF0C\u83B7\u53D6category\u4EE5\u53CAitem\u7684\u94FE\u63A5\u5E76\u5BF9\u540E\u8005\u4F7F\u7528 <code>parse_item</code> \u65B9\u6CD5\u3002 \u5F53item\u83B7\u5F97\u8FD4\u56DE(response)\u65F6\uFF0C\u5C06\u4F7F\u7528XPath\u5904\u7406HTML\u5E76\u751F\u6210\u4E00\u4E9B\u6570\u636E\u586B\u5165 <code>[Item](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/items.html#scrapy.item.Item)</code> \u4E2D\u3002</p>`,3),Mn={id:"_3-xmlfeedspider\xB6",tabindex:"-1"},Ln=s("a",{class:"header-anchor",href:"#_3-xmlfeedspider\xB6","aria-hidden":"true"},"#",-1),Fn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#xmlfeedspider",target:"_blank",rel:"noopener noreferrer"},In=s("em",null,"class",-1),Xn=s("code",null,"scrapy.contrib.spiders.XMLFeedSpider",-1),Vn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider",target:"_blank",rel:"noopener noreferrer"},Tn=t("<p>XMLFeedSpider\u88AB\u8BBE\u8BA1\u7528\u4E8E\u901A\u8FC7\u8FED\u4EE3\u5404\u4E2A\u8282\u70B9\u6765\u5206\u6790XML\u6E90(XML feed)\u3002 \u8FED\u4EE3\u5668\u53EF\u4EE5\u4ECE <code>iternodes</code> \uFF0C <code>xml</code> \uFF0C <code>html</code> \u9009\u62E9\u3002 \u9274\u4E8E <code>xml</code> \u4EE5\u53CA <code>html</code> \u8FED\u4EE3\u5668\u9700\u8981\u5148\u8BFB\u53D6\u6240\u6709DOM\u518D\u5206\u6790\u800C\u5F15\u8D77\u7684\u6027\u80FD\u95EE\u9898\uFF0C \u4E00\u822C\u8FD8\u662F\u63A8\u8350\u4F7F\u7528 <code>iternodes</code> \u3002 \u4E0D\u8FC7\u4F7F\u7528 <code>html</code> \u4F5C\u4E3A\u8FED\u4EE3\u5668\u80FD\u6709\u6548\u5E94\u5BF9\u9519\u8BEF\u7684XML\u3002</p><p>\u60A8\u5FC5\u987B\u5B9A\u4E49\u4E0B\u5217\u7C7B\u5C5E\u6027\u6765\u8BBE\u7F6E\u8FED\u4EE3\u5668\u4EE5\u53CA\u6807\u7B7E\u540D(tag name):</p>",2),Un=s("code",null,"iterator",-1),jn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.iterator",target:"_blank",rel:"noopener noreferrer"},Dn=t("<p>\u7528\u4E8E\u786E\u5B9A\u4F7F\u7528\u54EA\u4E2A\u8FED\u4EE3\u5668\u7684string\u3002\u53EF\u9009\u9879\u6709:</p><ul><li><strong><code>&#39;iternodes&#39;</code></strong>\xA0- \u4E00\u4E2A\u9AD8\u6027\u80FD\u7684\u57FA\u4E8E\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u8FED\u4EE3\u5668, \u9ED8\u8BA4\u503C</li><li><strong><code>&#39;html&#39;</code></strong>\xA0- \u4F7F\u7528\xA0<strong><code>[Selector](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/selectors.html#scrapy.selector.Selector)</code></strong>\xA0\u7684\u8FED\u4EE3\u5668\u3002 \u9700\u8981\u6CE8\u610F\u7684\u662F\u8BE5\u8FED\u4EE3\u5668\u4F7F\u7528DOM\u8FDB\u884C\u5206\u6790\uFF0C\u5176\u9700\u8981\u5C06\u6240\u6709\u7684DOM\u8F7D\u5165\u5185\u5B58\uFF0C \u5F53\u6570\u636E\u91CF\u5927\u7684\u65F6\u5019\u4F1A\u4EA7\u751F\u95EE\u9898\u3002</li><li><strong><code>&#39;xml&#39;</code></strong>\xA0- \u4F7F\u7528\xA0<strong><code>[Selector](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/selectors.html#scrapy.selector.Selector)</code></strong>\xA0\u7684\u8FED\u4EE3\u5668\u3002 \u9700\u8981\u6CE8\u610F\u7684\u662F\u8BE5\u8FED\u4EE3\u5668\u4F7F\u7528DOM\u8FDB\u884C\u5206\u6790\uFF0C\u5176\u9700\u8981\u5C06\u6240\u6709\u7684DOM\u8F7D\u5165\u5185\u5B58\uFF0C \u5F53\u6570\u636E\u91CF\u5927\u7684\u65F6\u5019\u4F1A\u4EA7\u751F\u95EE\u9898\u3002</li></ul>",2),On=s("code",null,"itertag",-1),En={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.itertag",target:"_blank",rel:"noopener noreferrer"},An=t(`<p>\u4E00\u4E2A\u5305\u542B\u5F00\u59CB\u8FED\u4EE3\u7684\u8282\u70B9\u540D\u7684string\u3002\u4F8B\u5982:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>itertag <span class="token operator">=</span> <span class="token string">&#39;product&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),Pn=s("code",null,"namespaces",-1),Bn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.namespaces",target:"_blank",rel:"noopener noreferrer"},Hn=t(`<p>\u4E00\u4E2A\u7531 <code>(prefix, url)</code> \u5143\u7EC4(tuple)\u6240\u7EC4\u6210\u7684list\u3002 \u5176\u5B9A\u4E49\u4E86\u5728\u8BE5\u6587\u6863\u4E2D\u4F1A\u88ABspider\u5904\u7406\u7684\u53EF\u7528\u7684namespace\u3002 <code>prefix</code> \u53CA <code>uri</code> \u4F1A\u88AB\u81EA\u52A8\u8C03\u7528 <code>[register_namespace()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/selectors.html#scrapy.selector.Selector.register_namespace)</code> \u751F\u6210namespace\u3002</p><p>\u60A8\u53EF\u4EE5\u901A\u8FC7\u5728 <code>[itertag](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.itertag)</code> \u5C5E\u6027\u4E2D\u5236\u5B9A\u8282\u70B9\u7684namespace\u3002</p><p>\u4F8B\u5982:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">YourSpider</span><span class="token punctuation">(</span>XMLFeedSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>

    namespaces <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&#39;n&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://www.sitemaps.org/schemas/sitemap/0.9&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    itertag <span class="token operator">=</span> <span class="token string">&#39;n:url&#39;</span>
    <span class="token comment"># ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u9664\u4E86\u8FD9\u4E9B\u65B0\u7684\u5C5E\u6027\u4E4B\u5916\uFF0C\u8BE5spider\u4E5F\u6709\u4EE5\u4E0B\u53EF\u4EE5\u8986\u76D6(overrideable)\u7684\u65B9\u6CD5:</p>`,5),Yn=s("code",null,"adapt_response",-1),Gn=s("em",null,"response",-1),Jn={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.adapt_response",target:"_blank",rel:"noopener noreferrer"},Kn=s("p",null,"\u8BE5\u65B9\u6CD5\u5728spider\u5206\u6790response\u524D\u88AB\u8C03\u7528\u3002\u60A8\u53EF\u4EE5\u5728response\u88AB\u5206\u6790\u4E4B\u524D\u4F7F\u7528\u8BE5\u51FD\u6570\u6765\u4FEE\u6539\u5185\u5BB9(body)\u3002 \u8BE5\u65B9\u6CD5\u63A5\u53D7\u4E00\u4E2Aresponse\u5E76\u8FD4\u56DE\u4E00\u4E2Aresponse(\u53EF\u4EE5\u76F8\u540C\u4E5F\u53EF\u4EE5\u4E0D\u540C)\u3002",-1),Qn=s("code",null,"parse_node",-1),Wn=s("em",null,"response",-1),Zn=s("em",null,"selector",-1),$n={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.parse_node",target:"_blank",rel:"noopener noreferrer"},se=s("p",null,[n("\u5F53\u8282\u70B9\u7B26\u5408\u63D0\u4F9B\u7684\u6807\u7B7E\u540D\u65F6("),s("code",null,"itertag"),n(")\u8BE5\u65B9\u6CD5\u88AB\u8C03\u7528\u3002 \u63A5\u6536\u5230\u7684response\u4EE5\u53CA\u76F8\u5E94\u7684 "),s("code",null,"[Selector](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/selectors.html#scrapy.selector.Selector)"),n(" \u4F5C\u4E3A\u53C2\u6570\u4F20\u9012\u7ED9\u8BE5\u65B9\u6CD5\u3002 \u8BE5\u65B9\u6CD5\u8FD4\u56DE\u4E00\u4E2A "),s("code",null,"[Item](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/items.html#scrapy.item.Item)"),n(" \u5BF9\u8C61\u6216\u8005 "),s("code",null,"[Request](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/request-response.html#scrapy.http.Request)"),n(" \u5BF9\u8C61 \u6216\u8005\u4E00\u4E2A\u5305\u542B\u4E8C\u8005\u7684\u53EF\u8FED\u4EE3\u5BF9\u8C61(iterable)\u3002")],-1),ne=s("code",null,"process_results",-1),ee=s("em",null,"response",-1),ae=s("em",null,"results",-1),te={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.XMLFeedSpider.process_results",target:"_blank",rel:"noopener noreferrer"},pe=s("p",null,"\u5F53spider\u8FD4\u56DE\u7ED3\u679C(item\u6216request)\u65F6\u8BE5\u65B9\u6CD5\u88AB\u8C03\u7528\u3002 \u8BBE\u5B9A\u8BE5\u65B9\u6CD5\u7684\u76EE\u7684\u662F\u5728\u7ED3\u679C\u8FD4\u56DE\u7ED9\u6846\u67B6\u6838\u5FC3(framework core)\u4E4B\u524D\u505A\u6700\u540E\u7684\u5904\u7406\uFF0C \u4F8B\u5982\u8BBE\u5B9Aitem\u7684ID\u3002\u5176\u63A5\u53D7\u4E00\u4E2A\u7ED3\u679C\u7684\u5217\u8868(list of results)\u53CA\u5BF9\u5E94\u7684response\u3002 \u5176\u7ED3\u679C\u5FC5\u987B\u8FD4\u56DE\u4E00\u4E2A\u7ED3\u679C\u7684\u5217\u8868(list of results)(\u5305\u542BItem\u6216\u8005Request\u5BF9\u8C61)\u3002",-1),oe={id:"xmlfeedspider\u4F8B\u5B50\xB6",tabindex:"-1"},ce=s("a",{class:"header-anchor",href:"#xmlfeedspider\u4F8B\u5B50\xB6","aria-hidden":"true"},"#",-1),re={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#id5",target:"_blank",rel:"noopener noreferrer"},ie=t(`<p>\u8BE5spider\u5341\u5206\u6613\u7528\u3002\u4E0B\u8FB9\u662F\u5176\u4E2D\u4E00\u4E2A\u4F8B\u5B50:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> scrapy <span class="token keyword">import</span> log
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> XMLFeedSpider
<span class="token keyword">from</span> myproject<span class="token punctuation">.</span>items <span class="token keyword">import</span> TestItem

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>XMLFeedSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">&#39;example.com&#39;</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;example.com&#39;</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com/feed.xml&#39;</span><span class="token punctuation">]</span>
    iterator <span class="token operator">=</span> <span class="token string">&#39;iternodes&#39;</span> <span class="token comment"># This is actually unnecessary, since it&#39;s the default value</span>
    itertag <span class="token operator">=</span> <span class="token string">&#39;item&#39;</span>

    <span class="token keyword">def</span> <span class="token function">parse_node</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">,</span> node<span class="token punctuation">)</span><span class="token punctuation">:</span>
        log<span class="token punctuation">.</span>msg<span class="token punctuation">(</span><span class="token string">&#39;Hi, this is a &lt;%s&gt; node!: %s&#39;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>itertag<span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>node<span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        item <span class="token operator">=</span> TestItem<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;@id&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>extract<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> item
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7B80\u5355\u6765\u8BF4\uFF0C\u6211\u4EEC\u5728\u8FD9\u91CC\u521B\u5EFA\u4E86\u4E00\u4E2Aspider\uFF0C\u4ECE\u7ED9\u5B9A\u7684 <code>start_urls</code> \u4E2D\u4E0B\u8F7Dfeed\uFF0C \u5E76\u8FED\u4EE3feed\u4E2D\u6BCF\u4E2A <code>item</code> \u6807\u7B7E\uFF0C\u8F93\u51FA\uFF0C\u5E76\u5728 <code>[Item](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/items.html#scrapy.item.Item)</code> \u4E2D\u5B58\u50A8\u6709\u4E9B\u968F\u673A\u6570\u636E\u3002</p>`,3),le={id:"_4-csvfeedspider\xB6",tabindex:"-1"},de=s("a",{class:"header-anchor",href:"#_4-csvfeedspider\xB6","aria-hidden":"true"},"#",-1),ue={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#csvfeedspider",target:"_blank",rel:"noopener noreferrer"},he=s("em",null,"class",-1),ke=s("code",null,"scrapy.contrib.spiders.CSVFeedSpider",-1),me={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CSVFeedSpider",target:"_blank",rel:"noopener noreferrer"},_e=s("p",null,[n("\u8BE5spider\u9664\u4E86\u5176\u6309\u884C\u904D\u5386\u800C\u4E0D\u662F\u8282\u70B9\u4E4B\u5916\u5176\u4ED6\u548CXMLFeedSpider\u5341\u5206\u7C7B\u4F3C\u3002 \u800C\u5176\u5728\u6BCF\u6B21\u8FED\u4EE3\u65F6\u8C03\u7528\u7684\u662F "),s("code",null,"[parse_row()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CSVFeedSpider.parse_row)"),n(" \u3002")],-1),ve=s("code",null,"delimiter",-1),be={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CSVFeedSpider.delimiter",target:"_blank",rel:"noopener noreferrer"},ye=s("p",null,[n("\u5728CSV\u6587\u4EF6\u4E2D\u7528\u4E8E\u533A\u5206\u5B57\u6BB5\u7684\u5206\u9694\u7B26\u3002\u7C7B\u578B\u4E3Astring\u3002 \u9ED8\u8BA4\u4E3A "),s("code",null,"','"),n(" (\u9017\u53F7)\u3002")],-1),ge=s("code",null,"quotechar",-1),fe={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CSVFeedSpider.quotechar",target:"_blank",rel:"noopener noreferrer"},we=s("p",null,[n("A string with the enclosure character for each field in the CSV file Defaults to "),s("code",null,`'"'`),n(" (quotation mark).")],-1),Se=s("p",null,"\u5728CSV\u6587\u4EF6\u4E2D\u5305\u542B\u7684\u7528\u6765\u63D0\u53D6\u5B57\u6BB5\u7684\u884C\u7684\u5217\u8868\u3002\u53C2\u8003\u4E0B\u8FB9\u7684\u4F8B\u5B50\u3002",-1),Ce=s("code",null,"parse_row",-1),xe=s("em",null,"response",-1),Ne=s("em",null,"row",-1),qe={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CSVFeedSpider.parse_row",target:"_blank",rel:"noopener noreferrer"},ze=s("p",null,[n("\u8BE5\u65B9\u6CD5\u63A5\u6536\u4E00\u4E2Aresponse\u5BF9\u8C61\u53CA\u4E00\u4E2A\u4EE5\u63D0\u4F9B\u6216\u68C0\u6D4B\u51FA\u6765\u7684header\u4E3A\u952E\u7684\u5B57\u5178(\u4EE3\u8868\u6BCF\u884C)\u3002 \u8BE5spider\u4E2D\uFF0C\u60A8\u4E5F\u53EF\u4EE5\u8986\u76D6 "),s("code",null,"adapt_response"),n(" \u53CA "),s("code",null,"process_results"),n(" \u65B9\u6CD5\u6765\u8FDB\u884C\u9884\u5904\u7406(pre-processing)\u53CA\u540E(post-processing)\u5904\u7406\u3002")],-1),Re={id:"csvfeedspider\u4F8B\u5B50\xB6",tabindex:"-1"},Me=s("a",{class:"header-anchor",href:"#csvfeedspider\u4F8B\u5B50\xB6","aria-hidden":"true"},"#",-1),Le={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#id6",target:"_blank",rel:"noopener noreferrer"},Fe=t(`<p>\u4E0B\u9762\u7684\u4F8B\u5B50\u548C\u4E4B\u524D\u7684\u4F8B\u5B50\u5F88\u50CF\uFF0C\u4F46\u4F7F\u7528\u4E86 <code>[CSVFeedSpider](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.CSVFeedSpider)</code>:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> scrapy <span class="token keyword">import</span> log
<span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> CSVFeedSpider
<span class="token keyword">from</span> myproject<span class="token punctuation">.</span>items <span class="token keyword">import</span> TestItem

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>CSVFeedSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name <span class="token operator">=</span> <span class="token string">&#39;example.com&#39;</span>
    allowed_domains <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;example.com&#39;</span><span class="token punctuation">]</span>
    start_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com/feed.csv&#39;</span><span class="token punctuation">]</span>
    delimiter <span class="token operator">=</span> <span class="token string">&#39;;&#39;</span>
    quotechar <span class="token operator">=</span> <span class="token string">&quot;&#39;&quot;</span>
    headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse_row</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">,</span> row<span class="token punctuation">)</span><span class="token punctuation">:</span>
        log<span class="token punctuation">.</span>msg<span class="token punctuation">(</span><span class="token string">&#39;Hi, this is a row!: %r&#39;</span> <span class="token operator">%</span> row<span class="token punctuation">)</span>

        item <span class="token operator">=</span> TestItem<span class="token punctuation">(</span><span class="token punctuation">)</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span>
        item<span class="token punctuation">[</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">]</span>
        <span class="token keyword">return</span> item
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),Ie={id:"_5-sitemapspider\xB6",tabindex:"-1"},Xe=s("a",{class:"header-anchor",href:"#_5-sitemapspider\xB6","aria-hidden":"true"},"#",-1),Ve={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#sitemapspider",target:"_blank",rel:"noopener noreferrer"},Te=s("em",null,"class",-1),Ue=s("code",null,"scrapy.contrib.spiders.SitemapSpider",-1),je={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.SitemapSpider",target:"_blank",rel:"noopener noreferrer"},De={href:"http://www.sitemaps.org/",target:"_blank",rel:"noopener noreferrer"},Oe={href:"http://www.robotstxt.org/",target:"_blank",rel:"noopener noreferrer"},Ee=s("code",null,"sitemap_urls",-1),Ae={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.SitemapSpider.sitemap_urls",target:"_blank",rel:"noopener noreferrer"},Pe={href:"http://www.robotstxt.org/",target:"_blank",rel:"noopener noreferrer"},Be=s("code",null,"sitemap_rules",-1),He={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.SitemapSpider.sitemap_rules",target:"_blank",rel:"noopener noreferrer"},Ye=t(`<p>\u4E00\u4E2A\u5305\u542B <code>(regex, callback)</code> \u5143\u7EC4\u7684\u5217\u8868(list):</p><ul><li><code>regex</code> \u662F\u4E00\u7528\u4E8E\u5339\u914D\u4ECEsitemap\u63D0\u4F9B\u7684url\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u3002 <code>regex</code> \u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\u6216\u8005\u7F16\u8BD1\u7684\u6B63\u5219\u5BF9\u8C61(compiled regex object)\u3002</li><li>callback\u6307\u5B9A\u4E86\u5339\u914D\u6B63\u5219\u8868\u8FBE\u5F0F\u7684url\u7684\u5904\u7406\u51FD\u6570\u3002 <code>callback</code> \u53EF\u4EE5\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32(spider\u4E2D\u65B9\u6CD5\u7684\u540D\u5B57)\u6216\u8005\u662Fcallable\u3002</li></ul><p>\u4F8B\u5982:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>sitemap_rules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">&#39;/product/&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;parse_product&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u89C4\u5219\u6309\u987A\u5E8F\u8FDB\u884C\u5339\u914D\uFF0C\u4E4B\u540E\u7B2C\u4E00\u4E2A\u5339\u914D\u624D\u4F1A\u88AB\u5E94\u7528\u3002</p><p>\u5982\u679C\u60A8\u5FFD\u7565\u8BE5\u5C5E\u6027\uFF0Csitemap\u4E2D\u53D1\u73B0\u7684\u6240\u6709url\u5C06\u4F1A\u88AB <code>parse</code> \u51FD\u6570\u5904\u7406\u3002</p>`,6),Ge=s("code",null,"sitemap_follow",-1),Je={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.SitemapSpider.sitemap_follow",target:"_blank",rel:"noopener noreferrer"},Ke=s("p",null,"\u4E00\u4E2A\u7528\u4E8E\u5339\u914D\u8981\u8DDF\u8FDB\u7684sitemap\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u7684\u5217\u8868(list)\u3002\u5176\u4EC5\u4EC5\u88AB\u5E94\u7528\u5728 \u4F7F\u7528 Sitemap index files \u6765\u6307\u5411\u5176\u4ED6sitemap\u6587\u4EF6\u7684\u7AD9\u70B9\u3002",-1),Qe=s("p",null,"\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u6240\u6709\u7684sitemap\u90FD\u4F1A\u88AB\u8DDF\u8FDB\u3002",-1),We=s("code",null,"sitemap_alternate_links",-1),Ze={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.contrib.spiders.SitemapSpider.sitemap_alternate_links",target:"_blank",rel:"noopener noreferrer"},$e=t(`<p>\u6307\u5B9A\u5F53\u4E00\u4E2A <code>url</code> \u6709\u53EF\u9009\u7684\u94FE\u63A5\u65F6\uFF0C\u662F\u5426\u8DDF\u8FDB\u3002 \u6709\u4E9B\u975E\u82F1\u6587\u7F51\u7AD9\u4F1A\u5728\u4E00\u4E2A <code>url</code> \u5757\u5185\u63D0\u4F9B\u5176\u4ED6\u8BED\u8A00\u7684\u7F51\u7AD9\u94FE\u63A5\u3002</p><p>\u4F8B\u5982:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>loc</span><span class="token punctuation">&gt;</span></span>http://example.com/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>loc</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">xhtml:</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>alternate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">hreflang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>de<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://example.com/de<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53 <code>sitemap_alternate_links</code> \u8BBE\u7F6E\u65F6\uFF0C\u4E24\u4E2AURL\u90FD\u4F1A\u88AB\u83B7\u53D6\u3002 \u5F53 <code>sitemap_alternate_links</code> \u5173\u95ED\u65F6\uFF0C\u53EA\u6709 <code>http://example.com/</code> \u4F1A\u88AB\u83B7\u53D6\u3002</p><p>\u9ED8\u8BA4 <code>sitemap_alternate_links</code> \u5173\u95ED\u3002</p>`,5),sa={id:"sitemapspider\u6837\u4F8B\xB6",tabindex:"-1"},na=s("a",{class:"header-anchor",href:"#sitemapspider\u6837\u4F8B\xB6","aria-hidden":"true"},"#",-1),ea={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#id7",target:"_blank",rel:"noopener noreferrer"},aa=t(`<p>\u7B80\u5355\u7684\u4F8B\u5B50: \u4F7F\u7528 <code>parse</code> \u5904\u7406\u901A\u8FC7sitemap\u53D1\u73B0\u7684\u6240\u6709url:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> SitemapSpider

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>SitemapSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sitemap_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com/sitemap.xml&#39;</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span> <span class="token comment"># ... scrape item here ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7528\u7279\u5B9A\u7684\u51FD\u6570\u5904\u7406\u67D0\u4E9Burl\uFF0C\u5176\u4ED6\u7684\u4F7F\u7528\u53E6\u5916\u7684callback:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> SitemapSpider

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>SitemapSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sitemap_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com/sitemap.xml&#39;</span><span class="token punctuation">]</span>
    sitemap_rules <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">&#39;/product/&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;parse_product&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">&#39;/category/&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;parse_category&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse_product</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span> <span class="token comment"># ... scrape product ...</span>

    <span class="token keyword">def</span> <span class="token function">parse_category</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span> <span class="token comment"># ... scrape category ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),ta={href:"http://www.robotstxt.org/",target:"_blank",rel:"noopener noreferrer"},pa=s("code",null,"..sitemap_shop",-1),oa=t(`<div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> SitemapSpider

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>SitemapSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sitemap_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com/robots.txt&#39;</span><span class="token punctuation">]</span>
    sitemap_rules <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">&#39;/shop/&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;parse_shop&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
    sitemap_follow <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;/sitemap_shops&#39;</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">parse_shop</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span> <span class="token comment"># ... scrape shop here ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728SitemapSpider\u4E2D\u4F7F\u7528\u5176\u4ED6url:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> scrapy<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>spiders <span class="token keyword">import</span> SitemapSpider

<span class="token keyword">class</span> <span class="token class-name">MySpider</span><span class="token punctuation">(</span>SitemapSpider<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sitemap_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com/robots.txt&#39;</span><span class="token punctuation">]</span>
    sitemap_rules <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">&#39;/shop/&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;parse_shop&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>

    other_urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;http://www.example.com/about&#39;</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">start_requests</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        requests <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">super</span><span class="token punctuation">(</span>MySpider<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>start_requests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        requests <span class="token operator">+=</span> <span class="token punctuation">[</span>scrapy<span class="token punctuation">.</span>Request<span class="token punctuation">(</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>parse_other<span class="token punctuation">)</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> self<span class="token punctuation">.</span>other_urls<span class="token punctuation">]</span>
        <span class="token keyword">return</span> requests

    <span class="token keyword">def</span> <span class="token function">parse_shop</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span> <span class="token comment"># ... scrape shop here ...</span>

    <span class="token keyword">def</span> <span class="token function">parse_other</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span> <span class="token comment"># ... scrape other here ...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),ca={id:"\u8BA8\u8BBA-\xB6",tabindex:"-1"},ra=s("a",{class:"header-anchor",href:"#\u8BA8\u8BBA-\xB6","aria-hidden":"true"},"#",-1),ia={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#discuss",target:"_blank",rel:"noopener noreferrer"};function la(da,ua){const e=r("ExternalLinkIcon");return o(),c("div",null,[s("p",null,[s("a",l,[n("https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html"),a(e)])]),d,u,s("ol",null,[h,s("li",null,[s("p",null,[n("\u5728\u56DE\u8C03\u51FD\u6570\u5185\uFF0C\u60A8\u53EF\u4EE5\u4F7F\u7528 "),s("a",k,[n("\u9009\u62E9\u5668(Selectors)"),a(e)]),n(" (\u60A8\u4E5F\u53EF\u4EE5\u4F7F\u7528BeautifulSoup, lxml \u6216\u8005\u60A8\u60F3\u7528\u7684\u4EFB\u4F55\u89E3\u6790\u5668) \u6765\u5206\u6790\u7F51\u9875\u5185\u5BB9\uFF0C\u5E76\u6839\u636E\u5206\u6790\u7684\u6570\u636E\u751F\u6210item\u3002")])]),s("li",null,[s("p",null,[n("\u6700\u540E\uFF0C\u7531spider\u8FD4\u56DE\u7684item\u5C06\u88AB\u5B58\u5230\u6570\u636E\u5E93(\u7531\u67D0\u4E9B "),s("a",m,[n("Item Pipeline"),a(e)]),n(" \u5904\u7406)\u6216\u4F7F\u7528 "),s("a",_,[n("Feed exports"),a(e)]),n(" \u5B58\u5165\u5230\u6587\u4EF6\u4E2D\u3002")])])]),v,s("h2",b,[y,n(" Spider\u53C2\u6570"),s("a",g,[n("\xB6"),a(e)])]),f,s("p",null,[n("Spider\u53C2\u6570\u4E5F\u53EF\u4EE5\u901A\u8FC7Scrapyd\u7684 "),w,n(" API\u6765\u4F20\u9012\u3002 \u53C2\u89C1 "),s("a",S,[n("Scrapyd documentation"),a(e)]),n(".")]),s("h2",C,[x,n(" \u5185\u7F6ESpider\u53C2\u8003\u624B\u518C"),s("a",N,[n("\xB6"),a(e)])]),s("p",null,[n("Scrapy\u63D0\u4F9B\u591A\u79CD\u65B9\u4FBF\u7684\u901A\u7528spider\u4F9B\u60A8\u7EE7\u627F\u4F7F\u7528\u3002 \u8FD9\u4E9Bspider\u4E3A\u4E00\u4E9B\u5E38\u7528\u7684\u722C\u53D6\u60C5\u51B5\u63D0\u4F9B\u65B9\u4FBF\u7684\u7279\u6027\uFF0C \u4F8B\u5982\u6839\u636E\u67D0\u4E9B\u89C4\u5219\u8DDF\u8FDB\u67D0\u4E2A\u7F51\u7AD9\u7684\u6240\u6709\u94FE\u63A5\u3001\u6839\u636E "),s("a",q,[n("Sitemaps"),a(e)]),n(" \u6765\u8FDB\u884C\u722C\u53D6\uFF0C\u6216\u8005\u5206\u6790XML/CSV\u6E90\u3002")]),z,s("h3",R,[M,n(" 1. Spider"),s("a",L,[n("\xB6"),a(e)])]),s("blockquote",null,[s("p",null,[F,n(),I,s("a",X,[n("\xB6"),a(e)])])]),V,s("blockquote",null,[s("p",null,[T,s("a",U,[n("\xB6"),a(e)])])]),j,s("p",null,[n("\u5982\u679C\u8BE5spider\u722C\u53D6\u5355\u4E2A\u7F51\u7AD9(single domain)\uFF0C\u4E00\u4E2A\u5E38\u89C1\u7684\u505A\u6CD5\u662F\u4EE5\u8BE5\u7F51\u7AD9(domain)(\u52A0\u6216\u4E0D\u52A0 "),s("a",D,[n("\u540E\u7F00"),a(e)]),n(" )\u6765\u547D\u540Dspider\u3002 \u4F8B\u5982\uFF0C\u5982\u679Cspider\u722C\u53D6 "),O,n(" \uFF0C\u8BE5spider\u901A\u5E38\u4F1A\u88AB\u547D\u540D\u4E3A "),E,n(" \u3002")]),s("blockquote",null,[s("p",null,[A,s("a",P,[n("\xB6"),a(e)])])]),B,s("blockquote",null,[s("p",null,[H,s("a",Y,[n("\xB6"),a(e)])])]),G,s("blockquote",null,[s("p",null,[J,s("a",K,[n("\xB6"),a(e)])])]),Q,s("p",null,[n("For a list of available built-in settings see: "),s("a",W,[n("\u5185\u7F6E\u8BBE\u5B9A\u53C2\u8003\u624B\u518C"),a(e)]),n(".")]),s("blockquote",null,[s("p",null,[Z,s("a",$,[n("\xB6"),a(e)])])]),ss,s("p",null,[n("Crawlers encapsulate a lot of components in the project for their single entry access (such as extensions, middlewares, signals managers, etc). See "),s("a",ns,[n("Crawler API"),a(e)]),n(" to know more about them.")]),s("blockquote",null,[s("p",null,[es,s("a",as,[n("\xB6"),a(e)])])]),s("p",null,[n("Configuration on which this spider is been ran. This is a "),ts,n(" instance, see the "),s("a",ps,[n("Settings"),a(e)]),n(" topic for a detailed introduction on this subject.")]),s("blockquote",null,[s("p",null,[os,n("("),cs,n(", *"),rs,n(", **"),is,n(")"),s("a",ls,[n("\xB6"),a(e)])])]),ds,us,hs,ks,s("ul",null,[ms,s("li",null,[_s,n(" ("),s("em",null,[s("a",vs,[n("list"),a(e)])]),n(") \u2013 arguments passed to the "),bs,n(" method")]),ys]),s("blockquote",null,[s("p",null,[gs,n("()"),s("a",fs,[n("\xB6"),a(e)])])]),ws,s("blockquote",null,[s("p",null,[Ss,n("("),Cs,n(")"),s("a",xs,[n("\xB6"),a(e)])])]),Ns,qs,s("blockquote",null,[s("p",null,[zs,n("("),Rs,n(")"),s("a",Ms,[n("\xB6"),a(e)])])]),Ls,s("blockquote",null,[s("p",null,[Fs,n("("),Is,n("[, "),Xs,n(", "),Vs,n("])"),s("a",Ts,[n("\xB6"),a(e)])])]),s("p",null,[n("\u4F7F\u7528 "),Us,n(" \u65B9\u6CD5\u8BB0\u5F55(log)message\u3002 log\u4E2D\u81EA\u52A8\u5E26\u4E0A\u8BE5spider\u7684 "),js,n(" \u5C5E\u6027\u3002 \u66F4\u591A\u6570\u636E\u8BF7\u53C2\u89C1 "),s("a",Ds,[n("Logging"),a(e)]),n(" \u3002")]),s("blockquote",null,[s("p",null,[Os,n("("),Es,n(")"),s("a",As,[n("\xB6"),a(e)])])]),Ps,s("h3",Bs,[Hs,n(" Spider\u6837\u4F8B"),s("a",Ys,[n("\xB6"),a(e)])]),Gs,s("h3",Js,[Ks,n(" 2. CrawlSpider"),s("a",Qs,[n("\xB6"),a(e)])]),s("blockquote",null,[s("p",null,[Ws,n(),Zs,s("a",$s,[n("\xB6"),a(e)])])]),sn,nn,s("p",null,[en,s("a",an,[n("\xB6"),a(e)])]),tn,pn,s("p",null,[on,n("("),cn,n(")"),s("a",rn,[n("\xB6"),a(e)])]),ln,s("h3",dn,[un,n(" \u722C\u53D6\u89C4\u5219(Crawling rules)"),s("a",hn,[n("\xB6"),a(e)])]),s("blockquote",null,[s("p",null,[kn,n(),mn,n("(link_"),_n,n(", "),vn,n(", cb_"),bn,n(", "),yn,n(", process_"),gn,n(", process_"),fn,n(")"),s("a",wn,[n("\xB6"),a(e)])])]),s("p",null,[Sn,n(" \u662F\u4E00\u4E2A "),s("a",Cn,[n("Link Extractor"),a(e)]),n(" \u5BF9\u8C61\u3002 \u5176\u5B9A\u4E49\u4E86\u5982\u4F55\u4ECE\u722C\u53D6\u5230\u7684\u9875\u9762\u63D0\u53D6\u94FE\u63A5\u3002")]),xn,s("h3",Nn,[qn,n(" CrawlSpider\u6837\u4F8B"),s("a",zn,[n("\xB6"),a(e)])]),Rn,s("h3",Mn,[Ln,n(" 3. XMLFeedSpider"),s("a",Fn,[n("\xB6"),a(e)])]),s("blockquote",null,[s("p",null,[In,n(),Xn,s("a",Vn,[n("\xB6"),a(e)])])]),Tn,s("p",null,[Un,s("a",jn,[n("\xB6"),a(e)])]),Dn,s("p",null,[On,s("a",En,[n("\xB6"),a(e)])]),An,s("p",null,[Pn,s("a",Bn,[n("\xB6"),a(e)])]),Hn,s("p",null,[Yn,n("("),Gn,n(")"),s("a",Jn,[n("\xB6"),a(e)])]),Kn,s("p",null,[Qn,n("("),Wn,n(", "),Zn,n(")"),s("a",$n,[n("\xB6"),a(e)])]),se,s("p",null,[ne,n("("),ee,n(", "),ae,n(")"),s("a",te,[n("\xB6"),a(e)])]),pe,s("h3",oe,[ce,n(" XMLFeedSpider\u4F8B\u5B50"),s("a",re,[n("\xB6"),a(e)])]),ie,s("h3",le,[de,n(" 4. CSVFeedSpider"),s("a",ue,[n("\xB6"),a(e)])]),s("blockquote",null,[s("p",null,[he,n(),ke,s("a",me,[n("\xB6"),a(e)])])]),_e,s("p",null,[ve,s("a",be,[n("\xB6"),a(e)])]),ye,s("p",null,[ge,s("a",fe,[n("\xB6"),a(e)])]),we,Se,s("p",null,[Ce,n("("),xe,n(", "),Ne,n(")"),s("a",qe,[n("\xB6"),a(e)])]),ze,s("h3",Re,[Me,n(" CSVFeedSpider\u4F8B\u5B50"),s("a",Le,[n("\xB6"),a(e)])]),Fe,s("h3",Ie,[Xe,n(" 5. SitemapSpider"),s("a",Ve,[n("\xB6"),a(e)])]),s("blockquote",null,[s("p",null,[Te,n(),Ue,s("a",je,[n("\xB6"),a(e)])])]),s("p",null,[n("SitemapSpider\u4F7F\u60A8\u722C\u53D6\u7F51\u7AD9\u65F6\u53EF\u4EE5\u901A\u8FC7 "),s("a",De,[n("Sitemaps"),a(e)]),n(" \u6765\u53D1\u73B0\u722C\u53D6\u7684URL\u3002")]),s("p",null,[n("\u5176\u652F\u6301\u5D4C\u5957\u7684sitemap\uFF0C\u5E76\u80FD\u4ECE "),s("a",Oe,[n("robots.txt"),a(e)]),n(" \u4E2D\u83B7\u53D6sitemap\u7684url\u3002")]),s("p",null,[Ee,s("a",Ae,[n("\xB6"),a(e)])]),s("p",null,[n("\u5305\u542B\u60A8\u8981\u722C\u53D6\u7684url\u7684sitemap\u7684url\u5217\u8868(list)\u3002 \u60A8\u4E5F\u53EF\u4EE5\u6307\u5B9A\u4E3A\u4E00\u4E2A "),s("a",Pe,[n("robots.txt"),a(e)]),n(" \uFF0Cspider\u4F1A\u4ECE\u4E2D\u5206\u6790\u5E76\u63D0\u53D6url\u3002")]),s("p",null,[Be,s("a",He,[n("\xB6"),a(e)])]),Ye,s("p",null,[Ge,s("a",Je,[n("\xB6"),a(e)])]),Ke,Qe,s("p",null,[We,s("a",Ze,[n("\xB6"),a(e)])]),$e,s("h3",sa,[na,n(" SitemapSpider\u6837\u4F8B"),s("a",ea,[n("\xB6"),a(e)])]),aa,s("p",null,[n("\u8DDF\u8FDB "),s("a",ta,[n("robots.txt"),a(e)]),n(" \u6587\u4EF6\u5B9A\u4E49\u7684sitemap\u5E76\u53EA\u8DDF\u8FDB\u5305\u542B\u6709 "),pa,n(" \u7684url:")]),oa,s("h2",ca,[ra,n(" \u8BA8\u8BBA "),s("a",ia,[n("\xB6"),a(e)])])])}const ma=p(i,[["render",la],["__file","Spiders.html.vue"]]);export{ma as default};
