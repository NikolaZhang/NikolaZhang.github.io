import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as c,o as i,c as r,a as e,d as a,b as l,e as s}from"./app-Cminz_GF.js";const o={},p=s('<blockquote><p>开始一个新的系列谈谈关于elastic search的使用. 使用之前我们先谈一谈如何部署在服务器上部署一个elastic search应用.</p></blockquote><h2 id="elasticsearch" tabindex="-1"><a class="header-anchor" href="#elasticsearch" aria-hidden="true">#</a> elasticsearch</h2><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h3><p>由于我之前win上有一个elasticsearch的安装包. 因此直接将其上传到到虚拟机对应的目录下.<br><img src="https://tech.nikolazhang.top/2020-01-30-19-22-09.png" alt="2020-01-30-19-22-09"></p><p>之后执行<code>tar -zxvf elasticsearch-7.4.2-linux-x86_64.tar.gz</code>进行解压操作.</p><p><img src="https://tech.nikolazhang.top/2020-01-30-19-32-03.png" alt="2020-01-30-19-32-03"></p>',6),h=e("br",null,null,-1),d={href:"https://thans.cn/mirror/elasticsearch.html",target:"_blank",rel:"noopener noreferrer"},b=s(`<p>执行<code>wget https://elasticsearch.thans.cn/downloads/elasticsearch/elasticsearch-7.3.2-no-jdk-linux-x86_64.tar.gz</code></p><p><img src="https://tech.nikolazhang.top/2020-01-30-19-42-15.png" alt="2020-01-30-19-42-15"></p><p>重新执行<code>tar -zxvf elasticsearch-7.3.2-no-jdk-linux-x86_64.tar.gz</code><br><img src="https://tech.nikolazhang.top/2020-01-30-19-43-48.png" alt="2020-01-30-19-43-48"><br> 解压成功.</p><h3 id="配置java环境变量" tabindex="-1"><a class="header-anchor" href="#配置java环境变量" aria-hidden="true">#</a> 配置java环境变量</h3><p>将下面的内容复制到<code>/etc/profile</code>最后</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># JAVA_HOME需要修改为你的路径, 不过jdk相同路径应该是相同的</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/lib/jvm/java-8-openjdk-amd64
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JRE_HOME</span><span class="token operator">=</span><span class="token variable">\${JAVA_HOME}</span>/jre
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">\${JAVA_HOME}</span>/lib:<span class="token variable">\${JRE_HOME}</span>/lib
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">\${JAVA_HOME}</span>/bin:<span class="token environment constant">$PATH</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行<code>source profile</code>使修改生效\`</p><h3 id="启动及验证" tabindex="-1"><a class="header-anchor" href="#启动及验证" aria-hidden="true">#</a> 启动及验证</h3><p><img src="https://tech.nikolazhang.top/2020-01-31-09-46-18.png" alt="2020-01-31-09-46-18"></p><p>首先jdk版本不匹配. 当然你可以忽略这个问题.<br> 当然你也可以下载<code>openjdk-11-jdk</code><br> 重新配置环境变量, 执行<code>source /etc/profile</code></p><p><img src="https://tech.nikolazhang.top/2020-01-31-09-57-29.png" alt="2020-01-31-09-57-29"></p><p>另外我们需要切换到普通用户下进行启动.<br><img src="https://tech.nikolazhang.top/2020-01-31-10-11-25.png" alt="2020-01-31-10-11-25"><br> 出现这种情况直接对es目录777就完事了. <code>chmod -R 777 [安装目录]</code></p><p>之后就可以正常启动:<br><img src="https://tech.nikolazhang.top/2020-01-31-12-05-12.png" alt="2020-01-31-12-05-12"></p><p>访问接口, 但看到如下界面, es就安装成功了.<br><img src="https://tech.nikolazhang.top/2020-01-31-12-05-58.png" alt="2020-01-31-12-05-58"></p><p>p.s.: 显式的启动不是很友好关闭终端, 应用就直接结束了. 可以使用<code>./elasticsearch -d</code>在后台启动</p><h2 id="elasticsearch-header" tabindex="-1"><a class="header-anchor" href="#elasticsearch-header" aria-hidden="true">#</a> elasticsearch-header</h2><p><code>elasticsearch-header</code>提供了一种图形化操作elasticsearch的方法.<br> 部署方法见下:</p><h3 id="安装elasticsearch-header-没有安装成功" tabindex="-1"><a class="header-anchor" href="#安装elasticsearch-header-没有安装成功" aria-hidden="true">#</a> 安装elasticsearch-header[没有安装成功]</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone git://github.com/mobz/elasticsearch-head.git
<span class="token builtin class-name">cd</span> elasticsearch-head
<span class="token function">npm</span> <span class="token function">install</span>
<span class="token function">npm</span> run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不知道为什么install很忙, 即使使用镜像也是很慢. 因此我就放弃安装这个了.</p><h2 id="kibana" tabindex="-1"><a class="header-anchor" href="#kibana" aria-hidden="true">#</a> kibana</h2><p>kibana和elasticsearch-head都可以操作elasticsearch.</p><p>这里推荐一个镜像下载站<code>https://www.newbe.pro/tags/Mirrors/</code> 当然elasticsearch也可以在这里找到</p><p>获取kibana: <code>wget https://mirrors.huaweicloud.com/kibana/7.3.2/kibana-7.3.2-linux-x86_64.tar.gz</code></p><p>安装很简单只需要将安装包解压即可. <code>tar -zxvf kibana-7.3.2-linux-x86_64.tar.gz</code></p><h3 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h3><p>在bin目录下执行<code>./kibana --allow-root</code></p><p>建议: <code>nohup ./kibana --allow-root &amp;</code></p><p>在浏览器中输入:<code>localhost:5601</code> 即可看到UI.</p><p><img src="https://tech.nikolazhang.top/2020-01-31-16-55-37.png" alt="2020-01-31-16-55-37"></p><h3 id="配置kibana" tabindex="-1"><a class="header-anchor" href="#配置kibana" aria-hidden="true">#</a> 配置kibana</h3><p>如果你需要自定义一些内容. 可以到 config目录下修改kibana.yml文件<br><img src="https://tech.nikolazhang.top/2020-01-31-17-01-39.png" alt="2020-01-31-17-01-39"></p>`,32);function k(g,u){const n=c("ExternalLinkIcon");return i(),r("div",null,[p,e("p",null,[a("压缩包居然不完整??? 可能是没有下载完...."),h,a(" 可以尝试使用wget从"),e("a",d,[a("镜像站"),l(n)]),a("获取镜像.")]),b])}const _=t(o,[["render",k],["__file","elasticsearch系列_1_部署.html.vue"]]);export{_ as default};
