import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o as a,c as n,a as t,b as s,d as l,e as o}from"./app-532b2604.js";const g={},i=o(`<blockquote><p>Scrapy提供了log功能。您可以通过 scrapy.log 模块使用。当前底层实现使用了 Twisted logging ，不过可能在之后会有所变化。</p></blockquote><p>log服务必须通过显示调用 <code>scrapy.log.start()</code> 来开启，以捕捉顶层的Scrapy日志消息。 在此之上，每个crawler都拥有独立的log观察者(observer)(创建时自动连接(attach)),接收其spider的日志消息。</p><h2 id="日志级别" tabindex="-1"><a class="header-anchor" href="#日志级别" aria-hidden="true">#</a> 日志级别</h2><ol><li><strong><code>[CRITICAL](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.CRITICAL)</code></strong> - 严重错误(critical)</li><li><strong><code>[ERROR](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.ERROR)</code></strong> - 一般错误(regular errors)</li><li><strong><code>[WARNING](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.WARNING)</code></strong> - 警告信息(warning messages)</li><li><strong><code>[INFO](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.INFO)</code></strong> - 一般信息(informational messages)</li><li><strong><code>[DEBUG](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.DEBUG)</code></strong> - 调试信息(debugging messages)</li></ol><h3 id="如何设置日志级别" tabindex="-1"><a class="header-anchor" href="#如何设置日志级别" aria-hidden="true">#</a> 如何设置日志级别</h3><p>您可以通过终端选项(command line option) –loglevel/-L 或 LOG_LEVEL 来设置log级别。</p><h3 id="如何记录信息" tabindex="-1"><a class="header-anchor" href="#如何记录信息" aria-hidden="true">#</a> 如何记录信息</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> scrapy <span class="token keyword">import</span> log
log<span class="token punctuation">.</span>msg<span class="token punctuation">(</span><span class="token string">&quot;This is a warning&quot;</span><span class="token punctuation">,</span> level<span class="token operator">=</span>log<span class="token punctuation">.</span>WARNING<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="scrapy-log模块" tabindex="-1"><a class="header-anchor" href="#scrapy-log模块" aria-hidden="true">#</a> <strong>scrapy.log模块</strong></h2><blockquote><p><strong><code>scrapy.log.start</code>(<em>logfile=None</em>, <em>loglevel=None</em>, <em>logstdout=None</em>)</strong></p></blockquote><p>启动Scrapy顶层logger。该方法必须在记录任何顶层消息前被调用 (使用模块的 <strong><code>[msg()](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.msg)</code></strong> 而不是 <strong><code>[Spider.log](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider.log)</code></strong> 的消息)。否则，之前的消息将会丢失。</p><p>参数:</p><p>• <strong>logfile</strong> (<em>str</em>) – 用于保存log输出的文件路径。如果被忽略， <strong><code>[LOG_FILE](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#std:setting-LOG_FILE)</code></strong> 设置会被使用。 如果两个参数都是 <strong><code>None</code></strong> ，log将会被输出到标准错误流(standard error)。 • <strong>loglevel</strong> – 记录的最低的log级别. 可用的值有: <strong><code>[CRITICAL](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.CRITICAL)</code></strong>, <strong><code>[ERROR](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.ERROR)</code></strong>, <strong><code>[WARNING](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.WARNING)</code></strong>, <strong><code>[INFO](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.INFO)</code></strong> and <strong><code>[DEBUG](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#scrapy.log.DEBUG)</code></strong>. • <strong>logstdout</strong> (<em>boolean</em>) – 如果为 <strong><code>True</code></strong> ， 所有您的应用的标准输出(包括错误)将会被记录(logged instead)。 例如，如果您调用 “print ‘hello’” ，则’hello’ 会在Scrapy的log中被显示。 如果被忽略，则 <strong><code>[LOG_STDOUT](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#std:setting-LOG_STDOUT)</code></strong> 设置会被使用。</p><blockquote><p><strong><code>scrapy.log.msg</code>(<em>message</em>, <em>level=INFO</em>, <em>spider=None</em>)</strong></p></blockquote><p>记录信息(Log a message)</p><p>参数:</p>`,16),d=t("strong",null,"message",-1),p=t("em",null,"str",-1),h=t("strong",null,"level",-1),_={href:"https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/logging.html#topics-logging-levels",target:"_blank",rel:"noopener noreferrer"},m=t("strong",null,"spider",-1),y=t("strong",null,[t("code",null,"[Spider](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/spiders.html#scrapy.spider.Spider)")],-1),N=o('<h2 id="logging设置" tabindex="-1"><a class="header-anchor" href="#logging设置" aria-hidden="true">#</a> <strong>Logging设置</strong></h2><p>以下设置可以被用来配置logging:</p><ul><li><strong><code>[LOG_ENABLED](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#std:setting-LOG_ENABLED)</code></strong></li><li><strong><code>[LOG_ENCODING](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#std:setting-LOG_ENCODING)</code></strong></li><li><strong><code>[LOG_FILE](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#std:setting-LOG_FILE)</code></strong></li><li><strong><code>[LOG_LEVEL](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#std:setting-LOG_LEVEL)</code></strong></li><li><strong><code>[LOG_STDOUT](https://scrapy-chs.readthedocs.io/zh_CN/latest/topics/settings.html#std:setting-LOG_STDOUT)</code></strong></li></ul>',3);function u(L,C){const e=c("ExternalLinkIcon");return a(),n("div",null,[i,t("p",null,[s("• "),d,s(" ("),p,s(") – log的信息 • "),h,s(" – 该信息的log级别. 参考 "),t("a",_,[s("Log levels"),l(e)]),s(". • "),m,s(" ("),y,s(" 对象) – 记录该信息的spider. 当记录的信息和特定的spider有关联时，该参数必须被使用。")]),N])}const G=r(g,[["render",u],["__file","日志.html.vue"]]);export{G as default};
