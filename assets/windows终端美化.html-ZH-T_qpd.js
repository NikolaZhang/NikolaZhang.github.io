import{_ as l}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o as i,c as r,a as n,d as e,b as a,e as o}from"./app-UXitmlia.js";const p={},c=n("h2",{id:"powershell-版本更新",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#powershell-版本更新","aria-hidden":"true"},"#"),e(" powershell 版本更新")],-1),d=n("p",null,"默认版本为5.x，以下基于7.x版本，安装方式如下。",-1),u=n("p",null,"采用并行的方法，下载zip，解压后。为terminal添加pwsh.exe的全路径，基于该版本进行配置。",-1),h={href:"https://learn.microsoft.com/zh-cn/powershell/scripting/install/installing-powershell-on-windows?view=powershell-7.3#zip",target:"_blank",rel:"noopener noreferrer"},m=n("h2",{id:"安装scoop",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#安装scoop","aria-hidden":"true"},"#"),e(" 安装scoop")],-1),v={href:"https://www.notion.so/scoop-0afa48af43d74c00a4251a48877c0740",target:"_blank",rel:"noopener noreferrer"},k=o(`<h2 id="安装git" tabindex="-1"><a class="header-anchor" href="#安装git" aria-hidden="true">#</a> 安装git</h2><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code>scoop install git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="安装字体" tabindex="-1"><a class="header-anchor" href="#安装字体" aria-hidden="true">#</a> 安装字体</h2><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token comment"># scoop默认没有开启nerd-fonts分类，需要开启才能安装相关字体</span>
scoop bucket add nerd-fonts
<span class="token comment"># 安装字体时需要在管理员权限的终端中运行</span>
scoop install Meslo-NF-Mono
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装windows-terminal" tabindex="-1"><a class="header-anchor" href="#安装windows-terminal" aria-hidden="true">#</a> 安装<strong><strong>Windows Terminal</strong></strong></h2><p>配置 Windows Terminal，点击下拉菜单选择设置打开设置标签页，然后依次修改以下选项：</p><ul><li>启动 -&gt; 默认配置文件，改为 Powershell，如果你已经安装了 Powershell 7.2，这里应当可以自动搜索到。否则可能需要手动编辑配置文件。</li><li>启动 -&gt; 默认终端应用程序，改为 Windows Terminal。</li><li>外观 -&gt; 在选项卡中显示亚力克效果，选择启用。</li><li>配色方案，这里可以根据自己喜好调整。</li><li>配置文件默认值 -&gt; 外观 -&gt; 字体，改为 <code>MesloLGS NF</code> 字体，字号按照自己屏幕大小选择，再开启亚力克效果，透明度选择 70% 左右。</li></ul><p>这样一来，Windows Terminal 的配置就算完成了。当然如果你对自带的配色方案不满意，也可以从网络上寻找一些好看的配色方案， 其他设置也可以根据自己喜好进行修改，这里就不多做介绍了。</p><h2 id="安装-oh-my-posh" tabindex="-1"><a class="header-anchor" href="#安装-oh-my-posh" aria-hidden="true">#</a> <strong><strong>安装 oh-my-posh</strong></strong></h2><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Install-Module</span> posh-git <span class="token operator">-</span>Scope CurrentUser
<span class="token function">Install-Module</span> oh-my-posh <span class="token operator">-</span>Scope CurrentUser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装成功之后，设置主题</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token comment"># 首先需要加载oh-my-posh模块</span>
<span class="token function">Import-Module</span> oh-my-posh
<span class="token comment"># 然后指定一个主题</span>
<span class="token function">Set-PoshPrompt</span> <span class="token operator">-</span>Theme gmay
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>持久化配置：编辑配置文件$PROFILE</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code>code <span class="token variable">$PROFILE</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>添加如下内容：</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Import-Module</span> oh-my-posh
<span class="token function">Set-PoshPrompt</span> <span class="token operator">-</span>Theme gmay
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果Set-PoshPrompt提示错误，oh-my-posh的执行文件应该没有找到。关闭终端重试，或者直接安装exe，使用scoop也可。</p><h2 id="terminal-icons" tabindex="-1"><a class="header-anchor" href="#terminal-icons" aria-hidden="true">#</a> <strong><strong>Terminal-Icons</strong></strong></h2><p>Terminal-Icons 是一个为 Powershell 显示文件类型图标的 Powershell 模块，显示的图标同样基于 nerd-fonts。不过刚才我们已经安装并在终端中使用了 nerd-fonts，所以放心安装就可以了。</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Install-Module</span> <span class="token operator">-</span>Name Terminal-Icons <span class="token operator">-</span>Scope CurrentUser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装完毕后，在终端中导入模块，再运行一下 <code>Show-TerminalIconsTheme</code> 命令，就可以看到 Terminal-Icons 为文件类型显示图标的例子了。</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Import-Module</span> <span class="token operator">-</span>Name Terminal-Icons
<span class="token function">Show-TerminalIconsTheme</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>同样的，为了让所有终端都能生效，应该将下面一行添加到 <code>$PROFILE</code> 中。这样，以后再使用 <code>dir</code> 等命令显示文件的时候，都会显示出对应的图标。</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Import-Module</span> <span class="token operator">-</span>Name Terminal-Icons
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="psreadline" tabindex="-1"><a class="header-anchor" href="#psreadline" aria-hidden="true">#</a> <strong><strong>PSReadLine</strong></strong></h2><p>想让 Powershell 也拥有提示和补全功能？PSReadLine 可以帮你，这是一个可以增强终端体验的工具。</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Install-Module</span> PSReadLine <span class="token operator">-</span>AllowPrerelease <span class="token operator">-</span>Force
<span class="token comment"># 或者你喜欢稳定版</span>
<span class="token function">Install-Module</span> PSReadLine <span class="token operator">-</span>Scope CurrentUser
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置" tabindex="-1"><a class="header-anchor" href="#配置" aria-hidden="true">#</a> 配置</h3>`,28),b=n("code",null,"$PROFILE",-1),w={href:"https://docs.microsoft.com/en-us/powershell/module/psreadline/about/about_psreadline",target:"_blank",rel:"noopener noreferrer"},g=o(`<div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Import-Module</span> PSReadLine
<span class="token function">Set-PSReadLineOption</span> <span class="token operator">-</span>EditMode Emacs
<span class="token function">Set-PSReadLineOption</span> <span class="token operator">-</span>PredictionSource HistoryAndPlugin
<span class="token function">Set-PSReadLineOption</span> <span class="token operator">-</span>PredictionViewStyle ListView
<span class="token function">Set-PSReadLineOption</span> <span class="token operator">-</span>BellStyle None
<span class="token function">Set-PSReadLineKeyHandler</span> <span class="token operator">-</span>Chord <span class="token string">&#39;Ctrl+d&#39;</span> <span class="token operator">-</span><span class="token keyword">Function</span> DeleteChar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2><h3 id="oh-my-posh" tabindex="-1"><a class="header-anchor" href="#oh-my-posh" aria-hidden="true">#</a> oh my posh</h3>`,3),f={href:"https://ohmyposh.dev/docs/",target:"_blank",rel:"noopener noreferrer"},S=o(`<h2 id="我的配置" tabindex="-1"><a class="header-anchor" href="#我的配置" aria-hidden="true">#</a> 我的配置</h2><p>最后贴上我的<code>$PROFILE</code>配置：</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code>chcp 65001
<span class="token function">Import-Module</span> PSReadLine
<span class="token function">Set-PSReadlineOption</span> <span class="token operator">-</span>PredictionSource History
<span class="token function">Set-PSReadLineOption</span> <span class="token operator">-</span>PredictionViewStyle ListView
<span class="token function">Set-PSReadlineKeyHandler</span> <span class="token operator">-</span>Key Tab <span class="token operator">-</span><span class="token keyword">Function</span> Complete <span class="token comment"># 设置 Tab 键补全</span>
<span class="token function">Set-PSReadLineKeyHandler</span> <span class="token operator">-</span>Key <span class="token string">&quot;Ctrl+d&quot;</span> <span class="token operator">-</span><span class="token keyword">Function</span> MenuComplete <span class="token comment"># 设置 Ctrl+d 为菜单补全和 Intellisense</span>
<span class="token function">Set-PSReadLineKeyHandler</span> <span class="token operator">-</span>Key <span class="token string">&quot;Ctrl+z&quot;</span> <span class="token operator">-</span><span class="token keyword">Function</span> Undo <span class="token comment"># 设置 Ctrl+z 为撤销</span>
<span class="token function">Set-PSReadLineKeyHandler</span> <span class="token operator">-</span>Key UpArrow <span class="token operator">-</span><span class="token keyword">Function</span> HistorySearchBackward <span class="token comment"># 设置向上键为后向搜索历史记录</span>
<span class="token function">Set-PSReadLineKeyHandler</span> <span class="token operator">-</span>Key DownArrow <span class="token operator">-</span><span class="token keyword">Function</span> HistorySearchForward <span class="token comment"># 设置向下键为前向搜索历史纪录</span>


<span class="token keyword">function</span> which<span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">Get-Command</span> <span class="token variable">$name</span> <span class="token punctuation">|</span> <span class="token function">Select-Object</span> Definition <span class="token punctuation">}</span>
<span class="token keyword">function</span> rmrf<span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">Remove-Item</span> <span class="token variable">$item</span> <span class="token operator">-</span>Recurse <span class="token operator">-</span>Force <span class="token punctuation">}</span>
<span class="token keyword">function</span> mkfile<span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">|</span> <span class="token function">Out-File</span> <span class="token variable">$file</span> <span class="token operator">-</span>Encoding ASCII <span class="token punctuation">}</span>
<span class="token function">Import-Module</span> posh-git
<span class="token function">Import-Module</span> oh-my-posh
<span class="token function">Import-Module</span> <span class="token function">Get-ChildItemColor</span>
<span class="token function">Import-Module</span> WindowsConsoleFonts
<span class="token function">Set-Alias</span> l <span class="token function">Get-ChildItemColor</span> <span class="token operator">-</span>option AllScope
<span class="token function">Set-Alias</span> <span class="token function">ls</span> <span class="token function">Get-ChildItemColorFormatWide</span> <span class="token operator">-</span>option AllScope
<span class="token function">Set-Theme</span> qwerty
oh-my-posh init pwsh <span class="token operator">--</span>config <span class="token string">&quot;<span class="token variable">$env</span>:POSH_THEMES_PATH\\qwerty.omp.json&quot;</span> <span class="token punctuation">|</span> <span class="token function">Invoke-Expression</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3);function _(y,P){const s=t("ExternalLinkIcon");return i(),r("div",null,[c,d,u,n("p",null,[n("a",h,[e("在 Windows 上安装 PowerShell - PowerShell"),a(s)])]),m,n("p",null,[n("a",v,[e("scoop"),a(s)])]),k,n("p",null,[e("要使用 PSReadLine，同样需要在 "),b,e(" 中添加一些配置。如果想了解下面配置的意思，可以参考官方文档，"),n("a",w,[e("https://docs.microsoft.com/en-us/powershell/module/psreadline/about/about_psreadline"),a(s)])]),g,n("p",null,[n("a",f,[e("Introduction | Oh My Posh"),a(s)])]),S])}const L=l(p,[["render",_],["__file","windows终端美化.html.vue"]]);export{L as default};
