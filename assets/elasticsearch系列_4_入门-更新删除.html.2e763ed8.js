import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as a,e}from"./app.4001f435.js";const o={},t=e(`<h2 id="\u66F4\u65B0\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u66F4\u65B0\u6587\u6863" aria-hidden="true">#</a> \u66F4\u65B0\u6587\u6863</h2><p>\u6587\u6863\u5728elasticsearch\u4E2D\u662F\u4E0D\u53EF\u53D8\u7684. \u4F46\u662F\u53EF\u4EE5\u901A\u8FC7\u91CD\u5EFA\u7D22\u5F15\u8FDB\u884C\u66FF\u6362.</p><p><img src="https://tech.nikolazhang.top/2020-02-01-20-17-00.png" alt="2020-02-01-20-17-00" loading="lazy"></p><p>\u5982\u679C\u6211\u4EEC\u8981\u4FEE\u6539\u4E0A\u9762\u622A\u56FE\u4E2D\u7684<code>age</code>\u5B57\u6BB5, \u53EF\u4EE5\u5C06\u4E4B\u524D\u7684PUT\u65B9\u6CD5\u4E2D\u7684<code>age</code>\u503C\u4FEE\u6539\u5E76\u91CD\u65B0\u8FD0\u884C, \u5373\u53EF. <img src="https://tech.nikolazhang.top/2020-02-01-20-18-20.png" alt="2020-02-01-20-18-20" loading="lazy"></p><p>\u6CE8\u610F\u6B64\u65F6\u7684_version\u5B57\u6BB5\u4F1A\u589E\u52A01, \u8FD9\u4E2A\u8BBE\u8BA1\u5982\u540C\u6570\u636E\u5E93\u4E2D\u6211\u4EEC\u4F7F\u7528\u4E50\u89C2\u9501. \u90FD\u662F\u901A\u8FC7\u7248\u672C\u53F7\u5B9E\u73B0.</p><h3 id="\u5C40\u90E8\u66F4\u65B0" tabindex="-1"><a class="header-anchor" href="#\u5C40\u90E8\u66F4\u65B0" aria-hidden="true">#</a> \u5C40\u90E8\u66F4\u65B0</h3><p>\u4E0A\u9762\u901A\u8FC7\u5168\u6587\u66F4\u65B0\u8FC7\u4E8E\u7E41\u7410. \u73B0\u5728\u5C31\u4ECB\u7ECD\u4E00\u79CD\u66F4\u52A0\u7B80\u5355\u7684\u65B9\u5F0F\u8FDB\u884C\u66F4\u65B0.</p><p><img src="https://tech.nikolazhang.top/2020-02-03-15-46-28.png" alt="2020-02-03-15-46-28" loading="lazy"></p><p>\u6BD4\u5982\u66F4\u6539\u4E0A\u9762\u6587\u6863\u4E2D\u7684age:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /megacorp/employee/<span class="token number">3</span>/_update
<span class="token punctuation">{</span>
    <span class="token property">&quot;doc&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;age&quot;</span> <span class="token operator">:</span>  <span class="token number">40</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C\u4E4B\u540E, \u91CD\u65B0\u67E5\u8BE2: <img src="https://tech.nikolazhang.top/2020-02-03-15-48-23.png" alt="2020-02-03-15-48-23" loading="lazy"> \u7ED3\u679C\u5DF2\u7ECF\u53D8\u6210\u6211\u4EEC\u8BBE\u7F6E\u7684\u503C\u4E86.</p><h4 id="\u901A\u8FC7\u811A\u672C\u66F4\u65B0" tabindex="-1"><a class="header-anchor" href="#\u901A\u8FC7\u811A\u672C\u66F4\u65B0" aria-hidden="true">#</a> \u901A\u8FC7\u811A\u672C\u66F4\u65B0</h4><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /megacorp/employee/<span class="token number">3</span>/_update
<span class="token punctuation">{</span>
    <span class="token property">&quot;script&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ctx._source.age+=1&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ctx._source</code>\u8868\u793A\u7684\u662F<code>_source</code></p><p>\u6CE8\u610F\u5982\u679C\u4E0D\u786E\u5B9A\u66F4\u65B0\u7684\u5B57\u6BB5\u662F\u5426\u5B58\u5728, \u53EF\u4EE5\u4F7F\u7528<code>upsert</code>\u6307\u5B9A\u521D\u59CB\u503C\u521B\u5EFA.</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /megacorp/employee/<span class="token number">1</span>/_update
<span class="token punctuation">{</span>
   <span class="token property">&quot;script&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ctx._source.views+=1&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;upsert&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token property">&quot;views&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="\u66F4\u65B0\u548C\u51B2\u7A81" tabindex="-1"><a class="header-anchor" href="#\u66F4\u65B0\u548C\u51B2\u7A81" aria-hidden="true">#</a> \u66F4\u65B0\u548C\u51B2\u7A81</h4><p>\u5982\u679C\u7248\u672C\u53F7\u53D1\u751F\u51B2\u7A81, \u5E76\u4E14\u5728\u66F4\u65B0\u5148\u540E\u4E0D\u91CD\u8981\u7684\u60C5\u51B5\u4E0B. \u53EF\u4EE5\u5C1D\u8BD5\u518D\u6B21\u66F4\u65B0. \u8FD9\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u53C2\u6570 <code>retry_on_conflict</code> \u6765\u81EA\u52A8\u5B8C\u6210, \u8FD9\u4E2A\u53C2\u6570\u89C4\u5B9A\u4E86\u5931\u8D25\u4E4B\u524D update \u5E94\u8BE5\u91CD\u8BD5\u7684\u6B21\u6570, \u5B83\u7684\u9ED8\u8BA4\u503C\u4E3A0 \u3002</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>POST /megacorp/employee/<span class="token number">1</span>/_update?retry_on_conflict=<span class="token number">5</span>
<span class="token punctuation">{</span>
   <span class="token property">&quot;script&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;ctx._source.views+=1&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;upsert&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token property">&quot;views&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5220\u9664" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664" aria-hidden="true">#</a> \u5220\u9664</h2><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>DELETE /school-demo/school/<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://tech.nikolazhang.top/2020-02-01-20-51-52.png" alt="2020-02-01-20-51-52" loading="lazy"></p>`,22),p=[t];function i(c,l){return s(),a("div",null,p)}const u=n(o,[["render",i],["__file","elasticsearch\u7CFB\u5217[4]\u5165\u95E8-\u66F4\u65B0\u5220\u9664.html.vue"]]);export{u as default};
