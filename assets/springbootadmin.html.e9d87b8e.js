import{_ as t}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as p,c as e,a as n,b as s,d as o,e as c,r as i}from"./app.e7c9cb9e.js";const l={},u=n("blockquote",null,[n("p",null,"\u4ECB\u7ECD\u4E00\u4E0B\u57FA\u4E8Ezookeeper\u7684\u670D\u52A1\u5065\u5EB7\u76D1\u63A7\u5982\u4F55\u914D\u7F6E")],-1),k=n("h2",{id:"\u5410\u69FD-\u7F51\u4E0A\u7684\u6280\u672F\u6559\u7A0B\u7B80\u76F4\u4E86",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5410\u69FD-\u7F51\u4E0A\u7684\u6280\u672F\u6559\u7A0B\u7B80\u76F4\u4E86","aria-hidden":"true"},"#"),s(" \u5410\u69FD: \u7F51\u4E0A\u7684\u6280\u672F\u6559\u7A0B\u7B80\u76F4\u4E86")],-1),r=n("p",null,"\u5EFA\u8BAE\u4F60\u53C2\u8003\u5982\u4E0B\u7684\u4E24\u4E2A\u8D44\u6599:",-1),d=n("li",null,[n("code",null,"https://github.com/codecentric/spring-boot-admin"),s("\u8FD9\u4E2A\u9879\u76EE\u7684"),n("code",null,"spring-boot-admin-samples"),s("\u4E2D\u542B\u6709\u4F7F\u7528\u5404\u79CD\u7C7B\u578B\u7684\u6CE8\u518C\u4E2D\u5FC3\u914D\u7F6Eadmin\u7684\u65B9\u5F0F.")],-1),v={href:"https://codecentric.github.io/spring-boot-admin/2.1.6/#getting-started",target:"_blank",rel:"noopener noreferrer"},m=c(`<p>\u6211\u4E3B\u8981\u662F\u53C2\u80031\u4E2D\u7684\u9879\u76EE\u8FDB\u884C\u914D\u7F6E\u7684. \u6CE8\u610F\u6211\u4EEC\u7684\u524D\u63D0\u662F\u4F60\u7684\u6A21\u5757\u5DF2\u7ECF\u5F15\u5165\u4E86zookeeper\u76F8\u5173\u7684\u4F9D\u8D56, \u5E76\u4E14\u670D\u52A1\u80FD\u6B63\u786E\u6CE8\u518C\u5230\u6CE8\u518C\u4E2D\u5FC3.</p><h2 id="\u88AB\u76D1\u63A7\u6A21\u5757\u7684\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#\u88AB\u76D1\u63A7\u6A21\u5757\u7684\u5904\u7406" aria-hidden="true">#</a> \u88AB\u76D1\u63A7\u6A21\u5757\u7684\u5904\u7406</h2><p>\u88AB\u76D1\u63A7\u7684\u6A21\u5757\u8981\u6DFB\u52A0\u5982\u4E0B\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&quot;*&quot;</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> ALWAYS
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u5173\u4E8E\u65E5\u5FD7\u9700\u8981\u914D\u7F6E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> ./log_syscore
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">root</span><span class="token punctuation">:</span> info
    <span class="token key atrule">com.nikola.syscore</span><span class="token punctuation">:</span> debug
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u53EF\u4EE5\u6839\u636E\u9700\u8981\u81EA\u5B9A\u4E49\u65E5\u5FD7\u8F93\u51FA\u76EE\u5F55\u548C\u65E5\u5FD7\u7EA7\u522B. \u751F\u4EA7\u73AF\u5883\u76F4\u63A5info\u5C31\u53EF\u4EE5\u4E86, \u672C\u5730\u7684\u8BDD\u53EF\u4EE5\u914D\u7F6Edebug.</p><h2 id="\u76D1\u63A7\u6A21\u5757" tabindex="-1"><a class="header-anchor" href="#\u76D1\u63A7\u6A21\u5757" aria-hidden="true">#</a> \u76D1\u63A7\u6A21\u5757</h2><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">boot</span><span class="token punctuation">:</span>
    <span class="token key atrule">admin</span><span class="token punctuation">:</span>
      <span class="token key atrule">ui</span><span class="token punctuation">:</span>
        <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">&quot;\u804A\u5929\u5BA4\u76F8\u5173\u6A21\u5757\u5065\u5EB7\u76D1\u63A7&quot;</span>
        <span class="token key atrule">brand</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;img src=&#39;assets/img/icon-spring-boot-admin.svg&#39;&gt;&lt;span&gt;\u804A\u5929\u5BA4\u76F8\u5173\u6A21\u5757\u5065\u5EB7\u76D1\u63A7&lt;/span&gt;&quot;</span>
  <span class="token key atrule">security</span><span class="token punctuation">:</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> admin
      <span class="token key atrule">password</span><span class="token punctuation">:</span> admin
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">zookeeper</span><span class="token punctuation">:</span>
      <span class="token key atrule">connect-string</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">2181</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">register</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>spring.boot.admin\u4E2D\u53EF\u4EE5\u5BF9\u76D1\u63A7\u5E73\u53F0\u8FDB\u884C\u4E00\u4E9B\u914D\u7F6E. spring.boot.security\u5F53\u6211\u4EEC\u4F7F\u7528springsecurity\u6846\u67B6\u65F6, \u53EF\u4EE5\u4E3A\u76D1\u63A7\u5E73\u53F0\u8BBE\u7F6E\u8D26\u53F7\u5BC6\u7801\u767B\u5F55</p><p>\u5728\u542F\u52A8\u7C7B\u4E0A\u9700\u8981\u8BBE\u7F6E<code>@EnableAdminServer</code>\u6CE8\u89E3\u8868\u793A\u8FD9\u4E2A\u4E00\u4E2AAdminServer.</p><h2 id="\u5173\u4E8Espringsecurity\u7684\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5173\u4E8Espringsecurity\u7684\u914D\u7F6E" aria-hidden="true">#</a> \u5173\u4E8Espringsecurity\u7684\u914D\u7F6E</h2><p>\u8FD9\u4E2A\u76F4\u63A5\u4F7F\u7528\u4E86\u5B98\u65B9\u7684\u914D\u7F6E</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EnableWebSecurity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">AdminServerProperties</span> adminServer<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SecurityConfig</span><span class="token punctuation">(</span><span class="token class-name">AdminServerProperties</span> adminServer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>adminServer <span class="token operator">=</span> adminServer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">SavedRequestAwareAuthenticationSuccessHandler</span> successHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SavedRequestAwareAuthenticationSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        successHandler<span class="token punctuation">.</span><span class="token function">setTargetUrlParameter</span><span class="token punctuation">(</span><span class="token string">&quot;redirectTo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        successHandler<span class="token punctuation">.</span><span class="token function">setDefaultTargetUrl</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">(</span>authorizeRequests<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> authorizeRequests
                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/assets/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/actuator/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">(</span>formLogin<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> formLogin<span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">successHandler</span><span class="token punctuation">(</span>successHandler<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">(</span>logout<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> logout<span class="token punctuation">.</span><span class="token function">logoutUrl</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/logout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span><span class="token class-name">Customizer</span><span class="token punctuation">.</span><span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">(</span>csrf<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> csrf<span class="token punctuation">.</span><span class="token function">csrfTokenRepository</span><span class="token punctuation">(</span><span class="token class-name">CookieCsrfTokenRepository</span><span class="token punctuation">.</span><span class="token function">withHttpOnlyFalse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">ignoringRequestMatchers</span><span class="token punctuation">(</span>
                                <span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/instances&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                        <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">POST</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                <span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/instances/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                        <span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token constant">DELETE</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                <span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">&quot;/actuator/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u542F\u52A8" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8" aria-hidden="true">#</a> \u542F\u52A8</h2><p>\u767B\u5F55\u754C\u9762 <img src="https://tech.nikolazhang.top/2020-04-03-01-27-29.png" alt="2020-04-03-01-27-29" loading="lazy"> \u9996\u9875(\u8FD9\u91CC\u53EF\u4EE5\u770B\u5230\u670D\u52A1\u7684\u72B6\u6001) <img src="https://tech.nikolazhang.top/2020-04-03-01-28-07.png" alt="2020-04-03-01-28-07" loading="lazy"><img src="https://tech.nikolazhang.top/2020-04-03-01-31-42.png" alt="2020-04-03-01-31-42" loading="lazy"> \u4F60\u53EF\u4EE5\u8FDB\u5165\u4E00\u4E2A\u670D\u52A1\u67E5\u770B\u670D\u52A1\u7684\u5185\u5B58\u7B49\u8FD0\u884C\u60C5\u51B5 <img src="https://tech.nikolazhang.top/2020-04-03-01-29-01.png" alt="2020-04-03-01-29-01" loading="lazy"> logging\u4E2D\u53EF\u4EE5\u67E5\u770B\u5F53\u524D\u670D\u52A1\u7684\u65E5\u5FD7\u4FE1\u606F. \u8FD9\u4E2A\u5BF9\u4E8E\u5206\u5E03\u5F0F\u7684\u90E8\u7F72\u65B9\u5F0F\u65E5\u5FD7\u67E5\u770B\u5E2E\u52A9\u6781\u5927, loggers\u4E2D\u53EF\u4EE5\u914D\u7F6E\u6307\u5B9A\u6587\u4EF6\u6216\u8005\u5305\u4E0B\u7684\u65E5\u5FD7\u7EA7\u522B. \u4E5F\u5C31\u662F\u4F60\u53EF\u4EE5\u5B9E\u65F6\u8C03\u6574\u65E5\u5FD7\u7684\u7EA7\u522B. <img src="https://tech.nikolazhang.top/2020-04-03-01-29-31.png" alt="2020-04-03-01-29-31" loading="lazy"></p>`,16);function g(h,b){const a=i("ExternalLinkIcon");return p(),e("div",null,[u,k,r,n("ol",null,[d,n("li",null,[n("a",v,[s("springbootAdmin\u53C2\u8003\u624B\u518C"),o(a)])])]),m])}const q=t(l,[["render",g],["__file","springbootadmin.html.vue"]]);export{q as default};
